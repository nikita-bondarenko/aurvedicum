"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[927],{2392:function(e,t,a){a.d(t,{Z:function(){return B}});var l=a(3396),s=a(7139),i=a(4870),n=a(9242);function u(e,t,a,i,n,u){const o=(0,l.up)("DeleteButton");return e.open?((0,l.wg)(),(0,l.j4)(l.lR,{key:0,to:"#teleport-target"},[(0,l._)("div",{class:(0,s.C_)([{"out-content":e.isOutContent},"teleport-blackout"])},null,2),(0,l._)("div",{class:"teleport-modal",onClick:t[2]||(t[2]=(...t)=>e.onOutsideClick&&e.onOutsideClick(...t))},[(0,l._)("div",{ref:"contentElement",onMouseleave:t[0]||(t[0]=t=>e.isOutContent=!0),onMouseenter:t[1]||(t[1]=t=>e.isOutContent=!1),class:"teleport-modal__content"},[(0,l.WI)(e.$slots,"default"),(0,l.Wm)(o,{class:"teleport-modal__close",onClick:e.doClose},null,8,["onClick"])],544)])])):(0,l.kq)("",!0)}const o=(0,i.iH)(new Set);function r(){const{uid:e}=(0,l.FN)(),t=(0,i.iH)(!1),a=()=>{t.value=!0,o.value.add(e)},s=()=>{t.value=!1,o.value.delete(e)},n=(0,l.Fl)((()=>!!o.value.size)),u=()=>{n.value?n.value&&(document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px",document.body.style.overflow="hidden"):(document.body.style.overflow=null,document.body.style.paddingRight=null)};return(0,l.YP)(n,(()=>{u()})),{doOpen:a,doClose:s,isOpen:t,isSomeOpen:(0,l.Fl)((()=>o.value.size))}}const c={type:"button",class:"close"},d=(0,l.uE)('<svg width="20" height="20" fill="currentColor"><g id="color"></g><g id="hair"></g><g id="skin"></g><g id="skin-shadow"></g><g id="line"><line x1="0" x2="20" y1="0" y2="20" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line><line x1="20" x2="0" y1="0" y2="20" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line></g></svg>',1),_=[d];var m={__name:"DeleteButton",setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("button",c,_))}};const v=m;var p=v,b=(0,l.aZ)({props:{open:{type:Boolean}},emits:["update:open"],components:{DeleteButton:p},setup(e,{emit:t}){const a=(0,i.iH)(null),{doOpen:s,doClose:n}=r(),u=(0,i.iH)(!0),o=()=>{t("update:open",!1),n()},c=e=>{e.target!==a.value&&e.target.contains(a.value)&&o()};return(0,l.YP)((()=>e.open),(e=>{e?s():o()}),{immediate:!0}),{isOutContent:u,onOutsideClick:c,doClose:o,contentElement:a}}}),g=a(89);const k=(0,g.Z)(b,[["render",u]]);var w=k;const y={key:0,class:"error"},f={key:1,class:"good-message"};var h={__name:"BaseMessage",props:{open:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"error"}},emits:["update:open"],setup(e,{emit:t}){const a=e,n=(0,l.Fl)({get(){return a.open},set(e){return t("update:open",e),e}});return(t,a)=>((0,l.wg)(),(0,l.j4)(w,{open:(0,i.SU)(n),"onUpdate:open":a[0]||(a[0]=e=>(0,i.dq)(n)?n.value=e:null)},{default:(0,l.w5)((()=>["error"===e.type?((0,l.wg)(),(0,l.iD)("div",y,(0,s.zw)(e.text),1)):((0,l.wg)(),(0,l.iD)("div",f,(0,s.zw)(e.text),1))])),_:1},8,["open"]))}};const C=h;var x=C,U=a(6866);const D={class:"form__counter counter"},H={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 52.161 52.161",style:{"enable-background":"new 0 0 52.161 52.161"},"xml:space":"preserve"},q=(0,l._)("g",null,[(0,l._)("path",{class:"button__minus--icon",d:"M52.161,26.081c0,3.246-2.63,5.875-5.875,5.875H5.875C2.63,31.956,0,29.327,0,26.081l0,0c0-3.245,2.63-5.875,5.875-5.875 h40.411C49.531,20.206,52.161,22.835,52.161,26.081L52.161,26.081z"})],-1),z=[q],S={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"45.402px",height:"45.402px",viewBox:"0 0 45.402 45.402",style:{"enable-background":"new 0 0 45.402 45.402"},"xml:space":"preserve"},W=(0,l._)("g",null,[(0,l._)("path",{class:"button__plus--icon",d:"M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"})],-1),O=[W];var I={__name:"BaseCounter",props:["quantity","volume"],emits:["update:quantity"],setup(e,{emit:t}){const a=e,u=(0,i.iH)(!1),o=(0,i.iH)(!1),r=(0,U.yj)(),c=(0,l.Fl)({get(){return a.quantity},set(e){return e>a.volume.quantity&&!o.value&&"item"===r.name||a.volume.quantity<=0&&!o.value?(u.value=!0,void(o.value=!1)):(o.value=!1,void t("update:quantity",e))}}),d=()=>{c.value-1>0&&(o.value=!0,c.value-=1)};return(e,t)=>((0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("button",{onClick:d,type:"button",class:"counter__button button__minus","aria-label":"Убрать один товар"},[((0,l.wg)(),(0,l.iD)("svg",H,z))]),(0,l.wy)((0,l._)("input",{class:(0,s.C_)({"input--disabled":"basket"===(0,i.SU)(r).name}),type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.dq)(c)?c.value=e:null)},null,2),[[n.nr,(0,i.SU)(c)]]),(0,l._)("button",{type:"button","aria-label":"Добавить один товар",class:"counter__button button__plus",onClick:t[1]||(t[1]=e=>c.value+=1)},[((0,l.wg)(),(0,l.iD)("svg",S,O))]),(0,l.Wm)(x,{open:u.value,"onUpdate:open":t[2]||(t[2]=e=>u.value=e),text:"item"===(0,i.SU)(r).name?"Вы можете установить только значение, не превышающее количество товара в наличии.":"Не получилось изменить количество товара в корзине. Товар закончился."},null,8,["open","text"])]))}};const Y=I;var B=Y},6927:function(e,t,a){a.r(t),a.d(t,{default:function(){return ge}});var l=a(3396),s=a(4870),i=a(7139),n=a(9242),u=a(86),o=a(6866),r=a(4460),c=a(4920),d=a(8707),_=a(9342),m=a(2392),v=a(9205);const p={class:"content container"},b={class:"content__top"},g={key:0,class:"breadcrumbs"},k={class:"breadcrumbs__item"},w=(0,l.Uk)(" Меню "),y={class:"breadcrumbs__item"},f=(0,l.Uk)(" Заказы "),h={class:"breadcrumbs__item"},C=(0,l.Uk)(" Оформление заказа "),x={class:"breadcrumbs__item"},U=(0,l.Uk)(" Каталог "),D={class:"breadcrumbs__item"},H={class:"breadcrumbs__link",disabled:""},q={key:1,class:"breadcrumbs"},z={class:"breadcrumbs__item"},S=(0,l.Uk)(" Меню "),W={class:"breadcrumbs__item"},O=(0,l.Uk)(" Заказы "),I={class:"breadcrumbs__item"},Y=(0,l.Uk)(" Изменение заказа "),B={class:"breadcrumbs__item"},j=(0,l.Uk)(" Каталог "),M={class:"breadcrumbs__item"},P={class:"breadcrumbs__link",disabled:""},Z={key:2,class:"breadcrumbs"},F={class:"breadcrumbs__item"},K=(0,l.Uk)(" Каталог "),T={class:"breadcrumbs__item"},E={class:"breadcrumbs__link",disabled:""},V={key:1,class:"failed-loading"},A={key:2,class:"item"},L={class:"item__pics pics"},R={class:"pics__list"},N=["onClick"],$=["src"],J={class:"item__info"},G={class:"item__title"},Q={class:"item__form"},X=["onSubmit"],ee={class:"item__row item__row--center"},te={class:"item__price-block"},ae={key:0,class:"item__subprice"},le={class:"item__row item__brand-volume"},se={class:"item__brand"},ie=(0,l._)("legend",{class:"form__legend"},"Бренд",-1),ne={class:"brand-list"},ue={class:"brand-list__text"},oe={class:"item__volume"},re=(0,l._)("legend",{class:"form__legend"},"Объем/вес",-1),ce=(0,l._)("div",{class:"button__subtext"},"Товар добавлен",-1),de={class:"item__desc"},_e={class:"tabs"},me=["onClick"],ve={class:"item__content"};var pe={__name:"ItemPage",setup(e){const t=(0,l.Fl)((()=>!!(0,o.yj)().name&&"adminItem"===(0,o.yj)().name)),a=(0,o.yj)().params.id,{getProductData:pe,addToBasket:be}=(0,c.Z)(),ge=(0,s.iH)({}),ke=(0,s.iH)(""),we=(0,s.iH)(""),ye=(0,s.iH)({}),fe=(0,s.iH)(!0),he=(0,s.iH)(!1),Ce=(0,s.iH)(!1),xe=(0,s.iH)(!1),Ue=(0,s.iH)(!0),De=(0,s.iH)(1),He=(0,s.iH)(!1),qe=(0,s.iH)(!1),ze=(0,s.iH)({}),{editNumberFormat:Se,pluralizeProductAmount:We}=(0,d.Z)();pe(a).then((e=>{ge.value=e,ge.value.volumes[0]&&(He.value=1===ge.value.volumes.length,we.value=ge.value.volumes[0].id,ye.value=ge.value.volumes[0]),ge.value.images[0]&&(ze.value=ge.value.images[0]),ge.value.description.length&&(ke.value=ge.value.description[0])})).catch((()=>he.value=!0)).then((()=>fe.value=!1));const Oe=setInterval((()=>{pe(a).then((e=>{ge.value=e,ye.value=ge.value.volumes.find((e=>e.id===we.value))}))}),200);(0,l.Jd)((()=>clearInterval(Oe)));const Ie=e=>{ke.value=ge.value.description.find((t=>t.id===e))};let Ye;(0,l.YP)((()=>ye.value),(e=>{we.value=e.id,qe.value=!!e.subprice,xe.value=0===e.quantity,Ue.value=e.quantity<De.value}),{deep:!0}),(0,l.YP)((()=>De.value),(e=>{Ue.value=e<=0,clearTimeout(Ye),e<=0&&(Ye=setTimeout((()=>De.value=1),2e3))}),{immediate:!0});const Be=e=>e.id===ke.value.id,je=async()=>{be({quantity:De.value,productId:ge.value.id,volumeId:ye.value.id,isAdd:!0})};return(0,l.YP)((()=>r.h.basketCounterLoading),(e=>{e||(Ce.value=!0,setTimeout((()=>Ce.value=!1),1e3))})),(e,a)=>{const o=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("main",p,[(0,l._)("div",b,[(0,s.SU)(t)?((0,l.wg)(),(0,l.iD)("ul",g,[(0,l._)("li",k,[(0,l.Wm)(o,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[w])),_:1})]),(0,l._)("li",y,[(0,l.Wm)(o,{to:{name:"adminOrders"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[f])),_:1})]),(0,l._)("li",h,[(0,l.Wm)(o,{to:{name:"adminOrderAdd"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[C])),_:1})]),(0,l._)("li",x,[(0,l.Wm)(o,{to:{name:"adminCatalog"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[U])),_:1})]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value.categories,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"breadcrumbs__item",key:e.id},[(0,l.Wm)(o,{to:{name:"adminCatalog",params:{categoryId:e.categoryId}},class:"breadcrumbs__link",href:"#"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1032,["to"])])))),128)),(0,l._)("li",D,[(0,l._)("span",H,(0,i.zw)(ge.value.name),1)])])):(0,l.kq)("",!0),(0,s.SU)(r.h).isOrderedBasket?((0,l.wg)(),(0,l.iD)("ul",q,[(0,l._)("li",z,[(0,l.Wm)(o,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[S])),_:1})]),(0,l._)("li",W,[(0,l.Wm)(o,{to:{name:"adminOrders"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[O])),_:1})]),(0,l._)("li",I,[(0,l.Wm)(o,{to:(0,s.SU)(r.h).page,class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[Y])),_:1},8,["to"])]),(0,l._)("li",B,[(0,l.Wm)(o,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[j])),_:1})]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value.categories,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"breadcrumbs__item",key:e.id},[(0,l.Wm)(o,{to:{name:"catalog",params:{categoryId:e.categoryId}},class:"breadcrumbs__link",href:"#"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1032,["to"])])))),128)),(0,l._)("li",M,[(0,l._)("span",P,(0,i.zw)(ge.value.name),1)])])):(0,s.SU)(t)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("ul",Z,[(0,l._)("li",F,[(0,l.Wm)(o,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,l.w5)((()=>[K])),_:1})]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value.categories,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"breadcrumbs__item",key:e.id},[(0,l.Wm)(o,{to:{name:"catalog",params:{categoryId:e.categoryId}},class:"breadcrumbs__link",href:"#"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1032,["to"])])))),128)),(0,l._)("li",T,[(0,l._)("span",E,(0,i.zw)(ge.value.name),1)])]))]),fe.value&&!he.value?((0,l.wg)(),(0,l.j4)(v.Z,{key:0})):he.value?((0,l.wg)(),(0,l.iD)("div",V," Не удалось загрузить информацию о товаре, попробуйте перезагрузить страницу. ")):((0,l.wg)(),(0,l.iD)("section",A,[(0,l._)("div",L,[(0,l._)("div",{class:"pics__wrapper",style:(0,i.j5)({background:`no-repeat center/contain url('${(0,s.SU)(u.Ie)+ze.value.filename}') transparent`})},[(0,l._)("ul",R,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value.images,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"pics__item",key:e.id},[(0,l._)("a",{href:"",onClick:(0,n.iM)((t=>ze.value=e),["prevent"]),class:(0,i.C_)(["pics__link",{"pics__link--current":e.id===ze.value.id}])},[(0,l._)("img",{alt:"Изображение товара",src:(0,s.SU)(u.Ie)+e.filename},null,8,$)],10,N)])))),128))])],4)]),(0,l._)("div",J,[(0,l._)("h2",G,(0,i.zw)(ge.value.name),1),(0,l._)("div",Q,[(0,l._)("form",{class:"form",action:"#",method:"POST",onSubmit:(0,n.iM)(je,["prevent"])},[(0,l._)("div",{class:(0,i.C_)(["item__quantity",{"item__quantity--error":xe.value}])},(0,i.zw)((0,s.SU)(We)(ye.value.quantity))+" в наличии ",3),(0,l._)("div",ee,[(0,l.Wm)(m.Z,{class:(0,i.C_)({disabled:0===ye.value.quantity}),quantity:De.value,"onUpdate:quantity":a[0]||(a[0]=e=>De.value=e),volume:ye.value},null,8,["class","quantity","volume"]),(0,l._)("div",te,[(0,l._)("b",{class:(0,i.C_)(["item__price",{"item__price--center":!qe.value}])},(0,i.zw)((0,s.SU)(Se)(ye.value.price))+" ₽ ",3),ye.value.subprice?((0,l.wg)(),(0,l.iD)("span",ae,(0,i.zw)((0,s.SU)(Se)(ye.value.subprice))+" ₽ ",1)):(0,l.kq)("",!0)])]),(0,l._)("div",le,[(0,l._)("div",se,[ie,(0,l._)("ul",ne,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value.brands,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"brand-list__item",key:e.id},[(0,l._)("span",ue,(0,i.zw)(e.title),1)])))),128))])]),(0,l._)("div",oe,[re,(0,l.Wm)(_.Z,{items:ge.value.volumes,volume:ye.value,"onUpdate:volume":a[1]||(a[1]=e=>ye.value=e)},null,8,["items","volume"])])]),(0,l._)("button",{class:(0,i.C_)(["button button--primery",{"button-error":Ue.value,"spinner-small":(0,s.SU)(r.h).basketCounterLoading,"button--added":Ce.value}]),type:"submit"},[ce,(0,l.Uk)(" "+(0,i.zw)(Ue.value?"Недопустимое количество товара":"В корзину"),1)],2)],40,X)])]),(0,l._)("div",de,[(0,l._)("ul",_e,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value.description,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"tabs__item",key:e.id},[(0,l._)("a",{onClick:(0,n.iM)((t=>Ie(e.id)),["prevent"]),class:(0,i.C_)(["tabs__link",{"tabs__link--current":Be(e)}])},(0,i.zw)(e.header),11,me)])))),128))]),(0,l._)("div",ve,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ke.value.content,(e=>((0,l.wg)(),(0,l.iD)("p",{key:e.id},(0,i.zw)(e.paragraph),1)))),128))])])]))])}}};const be=pe;var ge=be}}]);
//# sourceMappingURL=927.3c5f1ba0.js.map