"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[218],{6573:function(e,t,r){r.d(t,{Z:function(){return p}});var l=r(3396),a=r(7139);const o={class:"form__label"},n={class:"form__value"},u={key:0,class:"form__error"};function i(e,t,r,i,s,d){return(0,l.wg)(),(0,l.iD)("label",o,[(0,l.WI)(e.$slots,"default"),(0,l._)("span",n,(0,a.zw)(e.labelText),1),e.errorText?((0,l.wg)(),(0,l.iD)("span",u,(0,a.zw)(e.errorText),1)):(0,l.kq)("",!0)])}var s=(0,l.aZ)({props:["labelText","errorText"],setup(){return{}}}),d=r(89);const c=(0,d.Z)(s,[["render",i]]);var m=c,p={props:["placeholderText","modelValue","labelText","errorText"],emits:["update:modelValue"],components:{FormField:m},computed:{value:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e),e}}}}},1218:function(e,t,r){r.d(t,{Z:function(){return H}});var l=r(3396),a=r(9242),o=r(4870),n=r(7139),u=r(9412),i=r(2555),s=r(533),d=r(9556),c=r(8707),m=r(4920),p=r(4460);const _={class:"content container"},v={class:"cart"},x={class:"cart__field"},b={class:"cart__data"},h={class:"cart__options"},g=(0,l._)("h3",{class:"cart__title"},"Доставка",-1),U={class:"options__label"},S=["value"],f={class:"options__value"},w={class:"cart__orders"},k={key:1},y={key:2,class:"cart__total"},V=(0,l.Uk)(" Доставка: "),Z={key:0,class:"cart__error form__error-block"},T=(0,l._)("h4",null,"Заказ не отправлен!",-1),P=(0,l._)("p",null,"Заполните все необходимые поля и попробуйте еще раз.",-1),z=[T,P];var F={__name:"BaseOrderForm",props:["data","error","primeBtnText"],emits:["update:data","change"],setup(e,{emit:t}){const r=e,T=(0,l.Fl)({get(){return r.data},set(e){t("update:data",e)}}),{pluralizeProductAmount:P,editNumberFormat:F,deliveryPriceText:D}=(0,c.Z)(),{getDeliveries:H}=(0,m.Z)(),I=(0,o.iH)([]),C=(0,o.iH)(!0);H().then((e=>{I.value=e.data.items,C.value=!1}));const E=e=>e.find((e=>(!e.min||e.min<=p.h.basketTotalPrice)&&(!e.max||e.max>=p.h.basketTotalPrice))).value,O=e=>E(e);(0,l.YP)((()=>T.value.delivery),(e=>{e.price?T.value.deliveryPrice=E(e.price):T.value.deliveryPrice=0}),{deep:!0});const Y=(0,o.iH)({limit:5,page:1,pages:1}),W=(0,l.Fl)((()=>{const e=p.h.basketTotalPrice+T.value.deliveryPrice;return e}));return(0,l.YP)((()=>W.value),(e=>T.value.price=e)),(t,r)=>((0,l.wg)(),(0,l.iD)("main",_,[(0,l._)("section",v,[(0,l._)("form",{onSubmit:r[8]||(r[8]=(0,a.iM)(((...e)=>t.sendOrder&&t.sendOrder(...e)),["prevent"])),class:"cart__form form",action:"#",method:"POST"},[(0,l._)("div",x,[(0,l._)("div",b,[(0,l.Wm)(d.Z,{modelValue:(0,o.SU)(T).name,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,o.SU)(T).name=e),"placeholder-text":"Введите ваше полное имя","label-text":"ФИО *","error-text":e.error.name},null,8,["modelValue","error-text"]),(0,l.Wm)(d.Z,{modelValue:(0,o.SU)(T).address,"onUpdate:modelValue":r[1]||(r[1]=e=>(0,o.SU)(T).address=e),"placeholder-text":"Введите ваш адрес","label-text":"Адрес доставки *","error-text":e.error.address},null,8,["modelValue","error-text"]),(0,l.Wm)(d.Z,{modelValue:(0,o.SU)(T).phone,"onUpdate:modelValue":r[2]||(r[2]=e=>(0,o.SU)(T).phone=e),"placeholder-text":"Введите ваш телефон","label-text":"Телефон *","error-text":e.error.phone},null,8,["modelValue","error-text"]),(0,l.Wm)(d.Z,{modelValue:(0,o.SU)(T).email,"onUpdate:modelValue":r[3]||(r[3]=e=>(0,o.SU)(T).email=e),"placeholder-text":"Введи ваш Email","label-text":"Email *","error-text":e.error.email},null,8,["modelValue","error-text"]),(0,l.Wm)(s.Z,{class:"order__comment",modelValue:(0,o.SU)(T).comment,"onUpdate:modelValue":r[4]||(r[4]=e=>(0,o.SU)(T).comment=e),"placeholder-text":"Ваши пожелания","label-text":"Комментарий к заказу","error-text":e.error.comment},null,8,["modelValue","error-text"])]),(0,l._)("div",h,[g,(0,l._)("ul",{class:(0,n.C_)(["cart__options options",{"spinner-small":C.value}])},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(I.value,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"options__item",key:e.id},[(0,l._)("label",U,[(0,l.wy)((0,l._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:e,"onUpdate:modelValue":r[5]||(r[5]=e=>(0,o.SU)(T).delivery=e)},null,8,S),[[a.G2,(0,o.SU)(T).delivery]]),(0,l._)("span",f,[(0,l.Uk)((0,n.zw)(e.title)+" ",1),(0,l._)("b",null,(0,n.zw)((0,o.SU)(D)(O(e.price))),1)])])])))),128))],2)])]),(0,l._)("div",{class:(0,n.C_)(["cart__block",{indent:Y.value.pages>1}])},[Y.value.pages>1?((0,l.wg)(),(0,l.j4)(i.Z,{key:0,config:Y.value,"onUpdate:config":r[6]||(r[6]=e=>Y.value=e),pagination:Y.value},null,8,["config","pagination"])):(0,l.kq)("",!0),(0,l._)("ul",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(p.h).basketItems,(e=>((0,l.wg)(),(0,l.j4)(u.Z,{key:e.id,item:e},null,8,["item"])))),128)),(0,l._)("button",{onClick:r[7]||(r[7]=(0,a.iM)((e=>t.$emit("change")),["prevent"])),class:(0,n.C_)(["cart__change-button button--second button",{"small-button-spinner":(0,o.SU)(p.h).isChangeLoading}])}," Редактировать корзину ",2)]),0===(0,o.SU)(p.h).basketItems.length?((0,l.wg)(),(0,l.iD)("span",k,"В корзине пусто")):((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("p",null,[V,(0,l._)("b",null,(0,n.zw)((0,o.SU)(D)((0,o.SU)(T).deliveryPrice)),1)]),(0,l._)("p",null,[(0,l.Uk)(" Итого: "+(0,n.zw)((0,o.SU)(P)((0,o.SU)(p.h).basketItemsQuantity))+" на сумму ",1),(0,l._)("b",null,(0,n.zw)((0,o.SU)(F)((0,o.SU)(W)))+" ₽",1)])])),(0,o.SU)(p.h).basketItems.length>0?((0,l.wg)(),(0,l.iD)("button",{key:3,class:(0,n.C_)(["cart__button button button--primery",{"spinner-button-small":(0,o.SU)(p.h).isOrderLoading}]),type:"submit"},(0,n.zw)(e.primeBtnText),3)):(0,l.kq)("",!0)],2),Object.keys(e.error).length>0?((0,l.wg)(),(0,l.iD)("div",Z,z)):(0,l.kq)("",!0)],32)])]))}};const D=F;var H=D},9556:function(e,t,r){r.d(t,{Z:function(){return m}});r(6699);var l=r(3396),a=r(9242);const o=["type","placeholder"];function n(e,t,r,n,u,i){const s=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(s,{"label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("input",{onInput:t[0]||(t[0]=(...t)=>e.updateErrorStatus&&e.updateErrorStatus(...t)),class:"form__input","onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t),type:e.placeholderText.includes("телефон")?"tel":"text",placeholder:e.placeholderText},null,40,o),[[a.YZ,e.value]])])),_:1},8,["label-text","error-text"])}var u=r(6573),i=r(4870),s=(0,l.aZ)({mixins:[u.Z],setup(e){const t=(0,i.iH)(),r=r=>{t.value=r.target.value.trim()?null:e.errorText};return(0,l.YP)((()=>e.errorText),(e=>{t.value=e})),{errorValue:t,updateErrorStatus:r}}}),d=r(89);const c=(0,d.Z)(s,[["render",n]]);var m=c},533:function(e,t,r){r.d(t,{Z:function(){return m}});var l=r(3396),a=r(9242);const o=["placeholder"];function n(e,t,r,n,u,i){const s=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(s,{"label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("textarea",{onInput:t[0]||(t[0]=(...t)=>e.updateErrorStatus&&e.updateErrorStatus(...t)),class:"form__input form__input--area","onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t),placeholder:e.placeholderText},null,40,o),[[a.nr,e.value]])])),_:1},8,["label-text","error-text"])}var u=r(6573),i=r(4870),s=(0,l.aZ)({mixins:[u.Z],setup(e){const t=(0,i.iH)(),r=r=>{t.value=r.target.value.trim()?null:e.errorText};return(0,l.YP)((()=>e.errorText),(e=>{t.value=e})),{updateErrorStatus:r,errorValue:t}}}),d=r(89);const c=(0,d.Z)(s,[["render",n]]);var m=c},9412:function(e,t,r){r.d(t,{Z:function(){return d}});var l=r(3396),a=r(7139),o=r(4870),n=r(8707),u=r(4920),i={__name:"OrderBasketItem",props:["item"],setup(e){const t=e,{getProduct:r}=(0,u.Z)(),i=(0,o.iH)({}),{editVolumeFormat:s,editNumberFormat:d}=(0,n.Z)(),c=(0,o.iH)(!0),m=(0,o.iH)(!1);r({id:t.item.productId}).then((e=>{i.value=e.data})).catch((()=>m.value=!0)).then((()=>c.value=!1));const p=(0,l.Fl)((()=>i.value.volumes?s(i.value.volumes.find((e=>e.id===t.item.volumeId)).volume):""));return(t,r)=>((0,l.wg)(),(0,l.iD)("li",{class:(0,a.C_)(["cart__order",{"spinner-small":c.value,"loading-error":m.value}])},[(0,l._)("h3",null,(0,a.zw)(i.value.name),1),(0,l._)("b",null,(0,a.zw)((0,o.SU)(d)(e.item.price))+" ₽",1),(0,l._)("span",null,"Объем/вес:  "+(0,a.zw)((0,o.SU)(p)),1),(0,l._)("span",null,"Колличество: "+(0,a.zw)((0,o.SU)(d)(e.item.quantity))+" шт.",1)],2))}};const s=i;var d=s}}]);
//# sourceMappingURL=218.ba8f7eb9.js.map