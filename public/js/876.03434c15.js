"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[876],{2392:function(e,t,a){a.d(t,{Z:function(){return z}});var n=a(3396),l=a(7139),s=a(4870),i=a(9242);function o(e,t,a,s,i,o){const u=(0,n.up)("DeleteButton");return e.open?((0,n.wg)(),(0,n.j4)(n.lR,{key:0,to:"#teleport-target"},[(0,n._)("div",{class:(0,l.C_)([{"out-content":e.isOutContent},"teleport-blackout"])},null,2),(0,n._)("div",{class:"teleport-modal",onClick:t[2]||(t[2]=(...t)=>e.onOutsideClick&&e.onOutsideClick(...t))},[(0,n._)("div",{ref:"contentElement",onMouseleave:t[0]||(t[0]=t=>e.isOutContent=!0),onMouseenter:t[1]||(t[1]=t=>e.isOutContent=!1),class:"teleport-modal__content"},[(0,n.WI)(e.$slots,"default"),(0,n.Wm)(u,{class:"teleport-modal__close",onClick:e.doClose},null,8,["onClick"])],544)])])):(0,n.kq)("",!0)}const u=(0,s.iH)(new Set);function r(){const{uid:e}=(0,n.FN)(),t=(0,s.iH)(!1),a=()=>{t.value=!0,u.value.add(e)},l=()=>{t.value=!1,u.value.delete(e)},i=(0,n.Fl)((()=>!!u.value.size)),o=()=>{i.value?i.value&&(document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px",document.body.style.overflow="hidden"):(document.body.style.overflow=null,document.body.style.paddingRight=null)};return(0,n.YP)(i,(()=>{o()})),{doOpen:a,doClose:l,isOpen:t,isSomeOpen:(0,n.Fl)((()=>u.value.size))}}const c={type:"button",class:"close"},d=(0,n.uE)('<svg width="20" height="20" fill="currentColor"><g id="color"></g><g id="hair"></g><g id="skin"></g><g id="skin-shadow"></g><g id="line"><line x1="0" x2="20" y1="0" y2="20" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line><line x1="20" x2="0" y1="0" y2="20" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line></g></svg>',1),m=[d];var _={__name:"DeleteButton",setup(e){return(e,t)=>((0,n.wg)(),(0,n.iD)("button",c,m))}};const p=_;var k=p,g=(0,n.aZ)({props:{open:{type:Boolean}},emits:["update:open"],components:{DeleteButton:k},setup(e,{emit:t}){const a=(0,s.iH)(null),{doOpen:l,doClose:i}=r(),o=(0,s.iH)(!0),u=()=>{t("update:open",!1),i()},c=e=>{e.target!==a.value&&e.target.contains(a.value)&&u()};return(0,n.YP)((()=>e.open),(e=>{e?l():u()}),{immediate:!0}),{isOutContent:o,onOutsideClick:c,doClose:u,contentElement:a}}}),v=a(89);const b=(0,v.Z)(g,[["render",o]]);var w=b;const y={key:0,class:"error"},f={key:1,class:"good-message"};var h={__name:"BaseMessage",props:{open:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"error"}},emits:["update:open"],setup(e,{emit:t}){const a=e,i=(0,n.Fl)({get(){return a.open},set(e){return t("update:open",e),e}});return(t,a)=>((0,n.wg)(),(0,n.j4)(w,{open:(0,s.SU)(i),"onUpdate:open":a[0]||(a[0]=e=>(0,s.dq)(i)?i.value=e:null)},{default:(0,n.w5)((()=>["error"===e.type?((0,n.wg)(),(0,n.iD)("div",y,(0,l.zw)(e.text),1)):((0,n.wg)(),(0,n.iD)("div",f,(0,l.zw)(e.text),1))])),_:1},8,["open"]))}};const C=h;var x=C,B=a(6866);const U={class:"form__counter counter"},D={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 52.161 52.161",style:{"enable-background":"new 0 0 52.161 52.161"},"xml:space":"preserve"},F=(0,n._)("g",null,[(0,n._)("path",{class:"button__minus--icon",d:"M52.161,26.081c0,3.246-2.63,5.875-5.875,5.875H5.875C2.63,31.956,0,29.327,0,26.081l0,0c0-3.245,2.63-5.875,5.875-5.875 h40.411C49.531,20.206,52.161,22.835,52.161,26.081L52.161,26.081z"})],-1),q=[F],P={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"45.402px",height:"45.402px",viewBox:"0 0 45.402 45.402",style:{"enable-background":"new 0 0 45.402 45.402"},"xml:space":"preserve"},I=(0,n._)("g",null,[(0,n._)("path",{class:"button__plus--icon",d:"M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"})],-1),O=[I];var S={__name:"BaseCounter",props:["quantity","volume"],emits:["update:quantity"],setup(e,{emit:t}){const a=e,o=(0,s.iH)(!1),u=(0,s.iH)(!1),r=(0,B.yj)(),c=(0,n.Fl)({get(){return a.quantity},set(e){return e>a.volume.quantity&&!u.value&&"item"===r.name||a.volume.quantity<=0&&!u.value?(o.value=!0,void(u.value=!1)):(u.value=!1,void t("update:quantity",e))}}),d=()=>{c.value-1>0&&(u.value=!0,c.value-=1)};return(e,t)=>((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("button",{onClick:d,type:"button",class:"counter__button button__minus","aria-label":"Убрать один товар"},[((0,n.wg)(),(0,n.iD)("svg",D,q))]),(0,n.wy)((0,n._)("input",{class:(0,l.C_)({"input--disabled":"basket"===(0,s.SU)(r).name}),type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.dq)(c)?c.value=e:null)},null,2),[[i.nr,(0,s.SU)(c)]]),(0,n._)("button",{type:"button","aria-label":"Добавить один товар",class:"counter__button button__plus",onClick:t[1]||(t[1]=e=>c.value+=1)},[((0,n.wg)(),(0,n.iD)("svg",P,O))]),(0,n.Wm)(x,{open:o.value,"onUpdate:open":t[2]||(t[2]=e=>o.value=e),text:"item"===(0,s.SU)(r).name?"Вы можете установить только значение, не превышающее количество товара в наличии.":"Не получилось изменить количество товара в корзине. Товар закончился."},null,8,["open","text"])]))}};const H=S;var z=H},7876:function(e,t,a){a.r(t),a.d(t,{default:function(){return pe}});var n=a(3396),l=a(7139),s=a(9242);const i={class:"content container"},o={class:"content__top"},u={key:0,class:"breadcrumbs"},r={class:"breadcrumbs__item"},c=(0,n.Uk)(" Меню "),d={class:"breadcrumbs__item"},m=(0,n.Uk)(" Заказы "),_={class:"breadcrumbs__item"},p=(0,n.Uk)(" Оформление заказа "),k=(0,n._)("li",{class:"breadcrumbs__item"},[(0,n._)("span",{class:"breadcrumbs__link"}," Корзина ")],-1),g={key:1,class:"breadcrumbs"},v={class:"breadcrumbs__item"},b=(0,n.Uk)(" Меню "),w={class:"breadcrumbs__item"},y=(0,n.Uk)(" Заказы "),f={class:"breadcrumbs__item"},h=(0,n.Uk)(" Изменение заказа "),C=(0,n._)("li",{class:"breadcrumbs__item"},[(0,n._)("span",{class:"breadcrumbs__link"}," Корзина ")],-1),x={key:2,class:"breadcrumbs"},B={class:"breadcrumbs__item"},U=(0,n.Uk)(" Каталог "),D=(0,n._)("li",{class:"breadcrumbs__item"},[(0,n._)("span",{class:"breadcrumbs__link"}," Корзина ")],-1),F={class:"content__info"},q={key:1,class:"failed-loading"},P={key:2,class:"cart"},I={key:0,style:{"text-align":"center"}},O={key:1,class:"cart__form form",action:"#",method:"POST"},S={class:"cart__field"},H=(0,n.Uk)("Добавить товар из каталога"),z={class:"cart__list"},j={class:"cart__block"},W=(0,n._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),L={class:"cart__price"},Z=(0,n.Uk)(" Итого: "),M=(0,n.Uk)(" Перейти к заказу "),A=(0,n.Uk)("Оформить заказ ");function E(e,t,a,E,V,N){const Y=(0,n.up)("router-link"),R=(0,n.up)("BaseSpinner"),K=(0,n.up)("BasketItem"),Q=(0,n.up)("PaginationBase");return(0,n.wg)(),(0,n.iD)("main",i,[(0,n._)("div",o,[e.isAdmin?((0,n.wg)(),(0,n.iD)("ul",u,[(0,n._)("li",r,[(0,n.Wm)(Y,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[c])),_:1})]),(0,n._)("li",d,[(0,n.Wm)(Y,{to:{name:"adminOrders"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[m])),_:1})]),(0,n._)("li",_,[(0,n.Wm)(Y,{to:{name:"adminOrderAdd"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[p])),_:1})]),k])):(0,n.kq)("",!0),e.store.isOrderedBasket?((0,n.wg)(),(0,n.iD)("ul",g,[(0,n._)("li",v,[(0,n.Wm)(Y,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[b])),_:1})]),(0,n._)("li",w,[(0,n.Wm)(Y,{to:{name:"adminOrders"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[y])),_:1})]),(0,n._)("li",f,[(0,n.Wm)(Y,{to:e.store.page,class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[h])),_:1},8,["to"])]),C])):((0,n.wg)(),(0,n.iD)("ul",x,[(0,n._)("li",B,[(0,n.Wm)(Y,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[U])),_:1})]),D])),(0,n._)("span",F,"В корзине "+(0,l.zw)(e.total.toLowerCase()),1)]),e.isBasketLoading&&!e.isBasketLoadingFailed?((0,n.wg)(),(0,n.j4)(R,{key:0})):e.isBasketLoadingFailed?((0,n.wg)(),(0,n.iD)("div",q," Не удалось загрузить информацию, попробуйте перезагрузить страницу. ")):((0,n.wg)(),(0,n.iD)("section",P,[0===e.basketItems.length?((0,n.wg)(),(0,n.iD)("p",I," Корзина пуста ")):((0,n.wg)(),(0,n.iD)("form",O,[(0,n._)("div",S,[e.store.isOrderedBasket?((0,n.wg)(),(0,n.j4)(Y,{key:0,to:{name:"catalog"},onClick:e.store.setCatalogPathName,class:"button button--second cart__catalog-link"},{default:(0,n.w5)((()=>[H])),_:1},8,["onClick"])):(0,n.kq)("",!0),(0,n._)("ul",z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.basketItems,(e=>((0,n.wg)(),(0,n.j4)(K,{item:e,key:e.id},null,8,["item"])))),128))]),e.basketPagination.pages>1?((0,n.wg)(),(0,n.j4)(Q,{key:1,config:e.config,"onUpdate:config":t[0]||(t[0]=t=>e.config=t),pagination:e.basketPagination},null,8,["config","pagination"])):(0,n.kq)("",!0)]),(0,n._)("div",j,[W,(0,n._)("p",L,[Z,(0,n._)("span",null,(0,l.zw)(e.totalPrice)+"  ₽",1)]),e.store.isOrderedBasket?(0,n.wy)(((0,n.wg)(),(0,n.j4)(Y,{key:0,to:e.store.page,class:"cart__button button button--primery"},{default:(0,n.w5)((()=>[M])),_:1},8,["to"])),[[s.F8,e.isEmpty]]):(0,n.wy)(((0,n.wg)(),(0,n.j4)(Y,{key:1,to:{name:e.isAdmin?"adminOrderAdd":"order"},class:"cart__button button button--primery"},{default:(0,n.w5)((()=>[A])),_:1},8,["to"])),[[s.F8,e.isEmpty]])])]))]))])}var V=a(4870),N=a(8707),Y=a(86),R=a(4920),K=a(2392);const Q={class:"product__pic"},T=["src"],J={class:"product__title"},$={class:"product__info"},G=(0,n.Uk)(" Объем/вес: "),X={class:"product__code"},ee={class:"product__price"},te=["onClick"],ae=(0,n._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,n._)("path",{d:"M17 1L1 17m16 0L1 1",stroke:"#9D9D9D","stroke-width":".8"})],-1),ne=[ae];var le={__name:"BasketItem",props:["item"],setup(e){const t=e,{getProductData:a,updateBasketItemQuantity:i,deleteBasketItem:o}=(0,R.Z)(),{editVolumeFormat:u,pluralizeProductAmount:r,editNumberFormat:c}=(0,N.Z)(),d=(0,V.iH)({}),m=(0,V.iH)(!1),_=(0,V.iH)(!0),p=(0,V.iH)(!1),k=(0,n.Fl)((()=>d.value.volumes?d.value.volumes.find((e=>e.id===t.item.volumeId)):{})),g=(0,n.Fl)((()=>r(k.value.quantity))),v=(0,n.Fl)((()=>u(k.value.volume))),b=(0,V.Vh)(t.item,"quantity");a(t.item.productId).then((e=>{d.value=e,_.value=!1})).catch((()=>p.value=!0));const w=setInterval((()=>{p.value=!1,a(t.item.productId).then((e=>{d.value=e})).catch((()=>p.value=!0))}),100);(0,n.Jd)((()=>clearInterval(w))),(0,n.YP)((()=>b.value),((e,a)=>{m.value=!0;const n=a-e,l=n<0;i({itemId:t.item.id,quantity:Math.abs(n),isAdd:l}).then((()=>m.value=!1))}));const y=(0,V.iH)(!1),f=()=>{y.value=!0;const e=o({itemId:t.item.id});e.data&&(y.value=!1)};return(e,t)=>((0,n.wg)(),(0,n.iD)("li",{class:(0,l.C_)(["cart__item product",{"spinner-small":_.value||y.value,"loading-error":p.value}])},[(0,n._)("div",Q,[d.value.images?((0,n.wg)(),(0,n.iD)("img",{key:0,src:(0,V.SU)(Y.Ie)+d.value.images[0].filename,width:"120",height:"120",alt:"Название товара"},null,8,T)):(0,n.kq)("",!0)]),(0,n._)("h3",J,(0,l.zw)(d.value.name),1),(0,n._)("p",$,[G,(0,n._)("span",null,(0,l.zw)((0,V.SU)(v)),1)]),(0,n._)("span",X,(0,l.zw)((0,V.SU)(g))+" в наличии",1),(0,n.Wm)(K.Z,{class:(0,l.C_)([{disabled:m.value},"product__counter"]),quantity:(0,V.SU)(b),"onUpdate:quantity":t[0]||(t[0]=e=>(0,V.dq)(b)?b.value=e:null),volume:(0,V.SU)(k)},null,8,["class","quantity","volume"]),(0,n._)("b",ee,(0,l.zw)((0,V.SU)(c)((0,V.SU)(k).price))+" ₽ ",1),(0,n._)("button",{onClick:(0,s.iM)(f,["prevent"]),class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины"},ne,8,te)],2))}};const se=le;var ie=se,oe=a(9829),ue=a(2555),re=a(4460),ce=a(6866),de=(0,n.aZ)({components:{BasketItem:ie,BaseSpinner:oe.Z,PaginationBase:ue.Z},setup(){const e=(0,n.Fl)((()=>!!(0,ce.yj)().name&&"adminBasket"===(0,ce.yj)().name)),{pluralizeProductAmount:t,editNumberFormat:a}=(0,N.Z)(),{basketItemsQuantity:l,basketTotalPrice:s,basketItems:i,isBasketLoading:o,isBasketLoadingFailed:u,basketPagination:r,basketPaginationConfig:c}=(0,V.BK)(re.h),d=(0,n.Fl)({get(){return c.value},set(e){re.h.updateProp("basketPaginationConfig",e)}}),m=(0,n.Fl)((()=>i.value.length>0)),_=(0,n.Fl)((()=>t(l.value))),p=(0,n.Fl)((()=>a(s.value)));return{isAdmin:e,config:d,basketPagination:r,store:re.h,isBasketLoading:o,basketItems:i,isBasketLoadingFailed:u,totalPrice:p,total:_,isEmpty:m}}}),me=a(89);const _e=(0,me.Z)(de,[["render",E]]);var pe=_e}}]);
//# sourceMappingURL=876.03434c15.js.map