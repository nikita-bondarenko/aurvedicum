"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[866],{9866:function(a,e,t){t.r(e),t.d(e,{default:function(){return z}});var s=t(3396),n=t(7139),i=t(9242);const l={class:"content__top"},d={class:"breadcrumbs"},c={class:"breadcrumbs__item"},o=(0,s.Uk)(" Меню "),_=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("span",{class:"breadcrumbs__link",disabled:""}," Новости ")],-1),r={class:"catalog content__catalog article"},u=(0,s.Uk)(" Добавить"),g={key:1,class:"data-base__empty-message"},m={class:"data-base__list"},p={class:"data-base__item-body"},b=["src"],k={class:"data-base__name"},h={class:"data-base__created"},w={class:"data-base__changed"},f=(0,s.Uk)("Изменить"),v=["onClick"],D=(0,s._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,s._)("path",{d:"M17 1L1 17m16 0L1 1",stroke:"#9D9D9D","stroke-width":".8"})],-1),y=[D],C={key:2};function Z(a,e,t,D,Z,H){const I=(0,s.up)("router-link"),L=(0,s.up)("BaseSpinner"),M=(0,s.up)("PaginationBase");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",l,[(0,s._)("ul",d,[(0,s._)("li",c,[(0,s.Wm)(I,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[o])),_:1})]),_])]),(0,s._)("section",r,[(0,s.Wm)(I,{to:{name:"adminAddNew"},class:"data-base__button-add"},{default:(0,s.w5)((()=>[u])),_:1}),a.store.isLoading?((0,s.wg)(),(0,s.j4)(L,{key:0})):(0,s.kq)("",!0),0!==a.items.length||a.store.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",g," Список пуст ")),(0,s._)("ul",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,class:"data-base__item"},[(0,s._)("div",p,[(0,s._)("img",{class:"article__image",src:".."+a.IMAGE_STORE+e.filename,alt:"Иллюстрация статьи"},null,8,b),(0,s._)("h3",k,(0,n.zw)(e.header),1),(0,s._)("span",h,"Созданно: "+(0,n.zw)(a.editors.editDate(e.created)),1),(0,s._)("span",w,"Измененно: "+(0,n.zw)(a.editors.editDate(e.changed)),1),(0,s.Wm)(I,{class:"data-base__change-button",to:{name:"adminChangeNew",params:{id:e.id}}},{default:(0,s.w5)((()=>[f])),_:2},1032,["to"]),(0,s._)("button",{class:"data-base__button-del button-del",type:"button","aria-label":"Удалить товар",onClick:(0,i.iM)((t=>a.deleteItem(e.id)),["prevent"])},y,8,v)])])))),128))]),0!==a.items.length||a.store.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",C,"Список пуст")),a.pagination.pages>1?((0,s.wg)(),(0,s.j4)(M,{key:3,class:"catalog__pagination",config:a.config,"onUpdate:config":e[0]||(e[0]=e=>a.config=e),pagination:a.pagination},null,8,["config","pagination"])):(0,s.kq)("",!0)])],64)}var H=t(2555),I=t(9829),L=t(4870),M=t(4920),q=t(4460),B=t(86),E=t(8707);const{fetchWithParams:P}=(0,M.Z)();var S=(0,s.aZ)({components:{BaseSpinner:I.Z,PaginationBase:H.Z},data(){return{store:q.h,IMAGE_STORE:B.Ie}},setup(){const a=(0,E.Z)(),e=(0,L.iH)([]),t=(0,L.iH)({}),n=(0,L.iH)({limit:6,page:1}),i=()=>P("get","api/news",n.value).then((a=>{e.value=a.data.items,t.value=a.data.pagination})),l=a=>{P("delete",`api/news/${a}`,{},"").then((()=>i()))};return(0,s.YP)((()=>n.value),(()=>i()),{deep:!0,immediate:!0}),{editors:a,deleteItem:l,config:n,pagination:t,items:e}}}),U=t(89);const W=(0,U.Z)(S,[["render",Z]]);var z=W}}]);
//# sourceMappingURL=866.43051dd2.js.map