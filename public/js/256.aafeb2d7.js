"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[256],{6573:function(e,t,r){r.d(t,{Z:function(){return p}});var l=r(3396),a=r(7139);const o={class:"form__label"},i={class:"form__value"},n={key:0,class:"form__error"};function s(e,t,r,s,d,u){return(0,l.wg)(),(0,l.iD)("label",o,[(0,l.WI)(e.$slots,"default"),(0,l._)("span",i,(0,a.zw)(e.labelText),1),e.errorText?((0,l.wg)(),(0,l.iD)("span",n,(0,a.zw)(e.errorText),1)):(0,l.kq)("",!0)])}var d=(0,l.aZ)({props:["labelText","errorText"],setup(){return{}}}),u=r(89);const m=(0,u.Z)(d,[["render",s]]);var c=m,p={props:["placeholderText","modelValue","labelText","errorText"],emits:["update:modelValue"],components:{FormField:c},computed:{value:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e),e}}}}},8256:function(e,t,r){r.d(t,{Z:function(){return _e}});var l=r(3396),a=r(9242),o=r(4870),i=r(7139);const n=["placeholder"];function s(e,t,r,o,i,s){const d=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(d,{"label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("input",{onInput:t[0]||(t[0]=(...t)=>e.updateErrorStatus&&e.updateErrorStatus(...t)),class:"form__input","onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t),type:"number",placeholder:e.placeholderText},null,40,n),[[a.nr,e.value]])])),_:1},8,["label-text","error-text"])}var d=r(6573),u=(0,l.aZ)({mixins:[d.Z],setup(e){const t=(0,o.iH)(),r=r=>{t.value=r.target.value.trim()?null:e.errorText};return(0,l.YP)((()=>e.errorText),(e=>{t.value=e})),{errorValue:t,updateErrorStatus:r}}}),m=r(89);const c=(0,m.Z)(u,[["render",s]]);var p=c,_=r(9556),f=r(533);const x={key:0,class:"data-base__title"},v={class:"form__list"},g=["onClick"];var b={__name:"AdminFormList",props:["header","buttonText","items"],emits:["update:items"],setup(e,{emit:t}){const r=e,o=()=>{const e=r.items,l=r.items.length>0?r.items.reduce(((e,t)=>t.id>e?t.id:e),1)+1:1;e.push({id:l}),t("update:items",e)};return 0===r.items.length&&o(),(t,r)=>((0,l.wg)(),(0,l.iD)("fieldset",{class:(0,i.C_)(["form__block form__block--admin",{description__block:"обзац"===e.buttonText}])},[e.header?((0,l.wg)(),(0,l.iD)("h2",x,(0,i.zw)(e.header),1)):(0,l.kq)("",!0),(0,l._)("ul",v,[(0,l.WI)(t.$slots,"default")]),"бренд"!==e.buttonText?((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",onClick:(0,a.iM)(o,["prevent"]),class:"data-base__button-add"}," Добавить "+(0,i.zw)(e.buttonText),9,g)):(0,l.kq)("",!0)],2))}};const w=b;var h=w,U=r(4920),S=r(4460),k=r(86);const y={class:"form__item"},V={class:"form__item-body form__danger"},T=["onClick"],Z=(0,l._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,l._)("path",{d:"M17 1L1 17m16 0L1 1",stroke:"#9D9D9D","stroke-width":".8"})],-1),D=[Z];var E={__name:"AdminFormListItem",props:["item","items"],emits:["update:items"],setup(e,{emit:t}){const r=e,{deleteImage:o}=(0,U.Z)(),i=()=>{r.item.filename&&o(r.item.filename);const e=r.items.filter((e=>e.id!==r.item.id));t("update:items",e)},n=e=>{e.target.parentNode.classList.add("form__danger--active")},s=e=>{e.target.parentNode.classList.remove("form__danger--active")};return(t,r)=>((0,l.wg)(),(0,l.iD)("li",y,[(0,l._)("div",V,[e.items.length>1?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:(0,a.iM)(i,["prevent"]),onMouseenter:n,onMouseleave:s,class:"data-base__button-del button-del",type:"button","aria-label":"Удалить елемент"},D,40,T)):(0,l.kq)("",!0),(0,l.WI)(t.$slots,"default")])]))}};const H=E;var F=H;const I={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"30.021px",height:"30.021px",viewBox:"0 0 30.021 30.021",style:{"enable-background":"new 0 0 30.021 30.021"},"xml:space":"preserve"},W=(0,l._)("g",null,[(0,l._)("path",{d:"M29.069,22.276c-0.791,0.932-1.917,1.409-3.052,1.409c-0.913,0-1.834-0.312-2.587-0.949l-8.42-7.152l-8.42,7.151\r\n  c-1.683,1.43-4.208,1.225-5.639-0.459c-1.43-1.686-1.224-4.208,0.46-5.64l11.01-9.351c1.493-1.269,3.686-1.269,5.178,0\r\n  l11.011,9.351C30.294,18.068,30.499,20.591,29.069,22.276z"})],-1),C=[W],L={ref:"dropBox",class:"drop-box"},Y={class:"drop-box__body"},M={class:"drop-box__list"},j=["onClick"];function q(e,t,r,o,n,s){return(0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["select volume-row__item",{"select--open":e.isSelectOpen}]),ref:"selectElement",onMouseenter:t[0]||(t[0]=t=>e.isSelectHover=!0),onMouseleave:t[1]||(t[1]=t=>e.isSelectHover=!1),onClick:t[2]||(t[2]=(0,a.iM)((t=>e.isSelectOpen=!e.isSelectOpen),["prevent"]))},[(0,l.Uk)((0,i.zw)(e.title)+" ",1),(0,l._)("div",{class:(0,i.C_)(["select-arrow",{"select-arrow--hover":e.isSelectHover,"select-arrow--open":e.isSelectOpen}])},[((0,l.wg)(),(0,l.iD)("svg",I,C))],2),(0,l._)("div",L,[(0,l._)("div",Y,[(0,l._)("ul",M,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"drop-box__item",key:t.id},[(0,l._)("button",{onClick:(0,a.iM)((r=>e.select(t)),["prevent"]),class:"drop-box__button"},(0,i.zw)(t.title),9,j)])))),128))])])],512)],34)}var z=r(8707),K=(0,l.aZ)({props:["items","placeholder","id"],emits:["update:id","update:title"],setup(e,{emit:t}){const r=(0,o.iH)(!1),a=(0,o.iH)(!1),i=(0,o.iH)(null),n=(0,o.iH)(null),{editVolumeFormat:s}=(0,z.Z)(),d=(0,l.Fl)((()=>{const t=e.items.find((t=>t.id===e.id));return t?t.title:e.placeholder}));(0,l.YP)((()=>a.value),(e=>{e?n.value.classList.add("drop-box--open"):(n.value.classList.add("drop-box--hidden"),n.value.classList.remove("drop-box--open"),setTimeout((()=>n.value.classList.remove("drop-box--hidden")),500))})),document.body.addEventListener("click",(()=>!r.value&&a.value?a.value=!1:1));const u=e=>{t("update:id",e.id),t("update:title",e.title)};return{select:u,editVolumeFormat:s,title:d,isSelectHover:r,isSelectOpen:a,selectElement:i,dropBox:n}}});const P=(0,m.Z)(K,[["render",q]]);var O=P;const $=["placeholder"];function B(e,t,r,a,o,n){const s=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(s,{class:"form__file-label","label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l._)("input",{onInput:t[0]||(t[0]=t=>e.uploadImage(t)),class:(0,i.C_)(["form__input form__file-input",{"form__file-input--filled":e.isFilled}]),type:"file",placeholder:e.placeholderText},null,42,$)])),_:1},8,["label-text","error-text"])}var A=(0,l.aZ)({mixins:[d.Z],props:["filename"],emits:["update:filename"],setup(e,{emit:t}){const{postImage:r}=(0,U.Z)(),a=(0,o.iH)(),i=()=>{a.value=e.filename?null:e.errorText},n=(0,o.iH)(!1);(0,l.YP)((()=>e.filename),(e=>{n.value=!!e}),{immediate:!0});const s=e=>{e.target.classList.remove("form__file-input--filled"),e.target.classList.remove("form__file-input--error");const l=new FormData;l.append("image",e.target.files[0]),r(l).then((r=>{t("update:filename",r.data),e.target.classList.add("form__file-input--filled")})).catch((()=>{e.target.classList.add("form__file-input--error"),t("update:filename",null)})).then((()=>i()))};return(0,l.YP)((()=>e.errorText),(e=>{a.value=e})),{uploadImage:s,isFilled:n,errorValue:a,updateErrorStatus:i}}});const N=(0,m.Z)(A,[["render",B]]);var G=N;function R(e,t,r,a,o,i){const n=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(n,{"label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"default")])),_:3},8,["label-text","error-text"])}var J=(0,l.aZ)({mixins:[d.Z],props:["id"],setup(e){const t=(0,o.iH)(),r=()=>{t.value=e.id?null:e.errorText};return(0,l.YP)((()=>e.id),(()=>r())),(0,l.YP)((()=>e.errorText),(e=>{t.value=e})),{errorValue:t,updateErrorStatus:r}}});const Q=(0,m.Z)(J,[["render",R]]);var X=Q;const ee={class:"form__block form__block--admin name"},te=(0,l._)("h2",{class:"data-base__title"},"Название",-1),re={key:0,id:"gallery",class:"form__gallery"},le=["src"],ae={class:"form__block form__block--admin form__description description"},oe=(0,l._)("h2",{class:"data-base__title"},"Информация о товаре",-1),ie={class:"form__list"},ne={class:"form__item-body"},se={class:"description__header"},de={class:"form__button-group"},ue={key:0,class:"form__error-block"},me=(0,l._)("p",null,"Заполните все необходимые поля и попробуйте еще раз.",-1);var ce={__name:"ItemForm",props:["data","text","formError"],emits:["update:data","submit"],setup(e,{emit:t}){const r=e;console.log(k.IMAGE__STORE);const{getBrands:n,getCategories:s}=(0,U.Z)(),d=async()=>{const e=await s(),t=await n();m.value=e.data.items,c.value=t.data.items},u=(0,l.Fl)({get(){return r.data},set(e){t("update:data",e)}}),m=(0,o.iH)([]),c=(0,o.iH)([]);d();const x=(e,t)=>e.find((e=>e.id===t)),v=e=>{if(!r.formError.volumes)return;const t=x(r.formError.volumes,e);return t?t.volume:""},g=e=>{if(!r.formError.volumes)return;const t=x(r.formError.volumes,e);return t?t.price:""},b=e=>{if(!r.formError.volumes)return;const t=x(r.formError.volumes,e);return t?t.quantity:""},w=(e,t,l)=>{if(!r.formError[e])return;const a=x(r.formError[e],l);return a?a[t]:""},y=(e,t)=>{if(!r.formError.descriptions)return;const l=x(r.formError.descriptions,e);if(!l)return"";const a=x(l.content,t);return a?a.paragraph:""};return(r,n)=>((0,l.wg)(),(0,l.iD)("form",{action:"",class:"data-base__form form",onSubmit:n[9]||(n[9]=(0,a.iM)((e=>t("submit")),["prevent"]))},[(0,l._)("fieldset",ee,[te,(0,l.Wm)(_.Z,{class:"name__input",modelValue:(0,o.SU)(u).name,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,o.SU)(u).name=e),modelModifiers:{trim:!0},"placeholder-text":"Введите название товара","error-text":e.formError.name},null,8,["modelValue","error-text"])]),(0,l.Wm)(h,{header:"Объем/вес - цена","button-text":"объем/вес",items:(0,o.SU)(u).volumes,"onUpdate:items":n[2]||(n[2]=e=>(0,o.SU)(u).volumes=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(u).volumes,(e=>((0,l.wg)(),(0,l.j4)(F,{items:(0,o.SU)(u).volumes,"onUpdate:items":n[1]||(n[1]=e=>(0,o.SU)(u).volumes=e),item:e,key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(_.Z,{modelValue:e.volume,"onUpdate:modelValue":t=>e.volume=t,modelModifiers:{trim:!0},"placeholder-text":"Введите объем/вес","label-text":"Объем/вес *","error-text":v(e.id)},null,8,["modelValue","onUpdate:modelValue","error-text"]),(0,l.Wm)(p,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,"placeholder-text":"Введите цену","label-text":"Цена *","error-text":g(e.id)},null,8,["modelValue","onUpdate:modelValue","error-text"]),(0,l.Wm)(p,{modelValue:e.subprice,"onUpdate:modelValue":t=>e.subprice=t,"placeholder-text":"Введите цену","label-text":"Цена до скидки"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(p,{modelValue:e.quantity,"onUpdate:modelValue":t=>e.quantity=t,"placeholder-text":"Введите число","label-text":"Колличество *","error-text":b(e.id)},null,8,["modelValue","onUpdate:modelValue","error-text"])])),_:2},1032,["items","item"])))),128))])),_:1},8,["items"]),(0,l.Wm)(h,{header:"Бренд","button-text":"бренд",items:(0,o.SU)(u).brands,"onUpdate:items":n[4]||(n[4]=e=>(0,o.SU)(u).brands=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(u).brands,(e=>((0,l.wg)(),(0,l.j4)(F,{items:(0,o.SU)(u).brands,"onUpdate:items":n[3]||(n[3]=e=>(0,o.SU)(u).brands=e),item:e,key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{"error-text":w("brands","brandId",e.id),id:e.brandId},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{items:c.value,placeholder:"Выберите бренд",id:e.brandId,"onUpdate:id":t=>e.brandId=t,title:e.title,"onUpdate:title":t=>e.title=t},null,8,["items","id","onUpdate:id","title","onUpdate:title"])])),_:2},1032,["error-text","id"])])),_:2},1032,["items","item"])))),128))])),_:1},8,["items"]),(0,l.Wm)(h,{header:"Категория","button-text":"категорию",items:(0,o.SU)(u).categories,"onUpdate:items":n[6]||(n[6]=e=>(0,o.SU)(u).categories=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(u).categories,(e=>((0,l.wg)(),(0,l.j4)(F,{items:(0,o.SU)(u).categories,"onUpdate:items":n[5]||(n[5]=e=>(0,o.SU)(u).categories=e),item:e,key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{"error-text":w("categories","categoryId",e.id),id:e.categoryId},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{items:m.value,placeholder:"Выберите категорию",id:e.categoryId,"onUpdate:id":t=>e.categoryId=t,title:e.title,"onUpdate:title":t=>e.title=t},null,8,["items","id","onUpdate:id","title","onUpdate:title"])])),_:2},1032,["error-text","id"])])),_:2},1032,["items","item"])))),128))])),_:1},8,["items"]),(0,l.Wm)(h,{header:"Изображение","button-text":"изображение",items:(0,o.SU)(u).images,"onUpdate:items":n[8]||(n[8]=e=>(0,o.SU)(u).images=e)},{default:(0,l.w5)((()=>[(0,o.SU)(u).images.some((e=>e.filename))?((0,l.wg)(),(0,l.iD)("ul",re,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(u).images,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[e.filename?((0,l.wg)(),(0,l.iD)("img",{key:0,src:"../../uploads/"+e.filename,alt:"Изображение товара"},null,8,le)):(0,l.kq)("",!0)])))),128))])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(u).images,(e=>((0,l.wg)(),(0,l.j4)(F,{items:(0,o.SU)(u).images,"onUpdate:items":n[7]||(n[7]=e=>(0,o.SU)(u).images=e),item:e,key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{filename:e.filename,"onUpdate:filename":t=>e.filename=t,"error-text":w("images","filename",e.id)},null,8,["filename","onUpdate:filename","error-text"])])),_:2},1032,["items","item"])))),128))])),_:1},8,["items"]),(0,l._)("fieldset",ae,[oe,(0,l._)("ul",ie,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(u).description,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"form__item"},[(0,l._)("div",ne,[(0,l._)("h3",se,(0,i.zw)(e.header),1),(0,l.Wm)(h,{header:"","button-text":"обзац",items:e.content,"onUpdate:items":t=>e.content=t},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.content,(t=>((0,l.wg)(),(0,l.j4)(F,{items:e.content,"onUpdate:items":t=>e.content=t,item:t,key:t.id},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(f.Z,{key:t.id,"placeholder-text":"Текст",modelValue:t.paragraph,"onUpdate:modelValue":e=>t.paragraph=e,modelModifiers:{trim:!0},"error-text":y(e.id,t.id)},null,8,["modelValue","onUpdate:modelValue","error-text"]))])),_:2},1032,["items","onUpdate:items","item"])))),128))])),_:2},1032,["items","onUpdate:items"])])])))),128))])]),(0,l._)("div",de,[(0,l._)("button",{class:(0,i.C_)([{"spinner-button-small":(0,o.SU)(S.h).isSaveLoading},"button button--primery"]),type:"submit"},(0,i.zw)(e.text),3)]),(0,o.SU)(S.h).isSaveLoadingFailed?((0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("h4",null,"Не удалось "+(0,i.zw)(e.text)+"!",1),me])):(0,l.kq)("",!0)],32))}};const pe=ce;var _e=pe},9556:function(e,t,r){r.d(t,{Z:function(){return c}});r(6699);var l=r(3396),a=r(9242);const o=["type","placeholder"];function i(e,t,r,i,n,s){const d=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(d,{"label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("input",{onInput:t[0]||(t[0]=(...t)=>e.updateErrorStatus&&e.updateErrorStatus(...t)),class:"form__input","onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t),type:e.placeholderText.includes("телефон")?"tel":"text",placeholder:e.placeholderText},null,40,o),[[a.YZ,e.value]])])),_:1},8,["label-text","error-text"])}var n=r(6573),s=r(4870),d=(0,l.aZ)({mixins:[n.Z],setup(e){const t=(0,s.iH)(),r=r=>{t.value=r.target.value.trim()?null:e.errorText};return(0,l.YP)((()=>e.errorText),(e=>{t.value=e})),{errorValue:t,updateErrorStatus:r}}}),u=r(89);const m=(0,u.Z)(d,[["render",i]]);var c=m},533:function(e,t,r){r.d(t,{Z:function(){return c}});var l=r(3396),a=r(9242);const o=["placeholder"];function i(e,t,r,i,n,s){const d=(0,l.up)("FormField");return(0,l.wg)(),(0,l.j4)(d,{"label-text":e.labelText,"error-text":e.errorValue},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("textarea",{onInput:t[0]||(t[0]=(...t)=>e.updateErrorStatus&&e.updateErrorStatus(...t)),class:"form__input form__input--area","onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t),placeholder:e.placeholderText},null,40,o),[[a.nr,e.value]])])),_:1},8,["label-text","error-text"])}var n=r(6573),s=r(4870),d=(0,l.aZ)({mixins:[n.Z],setup(e){const t=(0,s.iH)(),r=r=>{t.value=r.target.value.trim()?null:e.errorText};return(0,l.YP)((()=>e.errorText),(e=>{t.value=e})),{updateErrorStatus:r,errorValue:t}}}),u=r(89);const m=(0,u.Z)(d,[["render",i]]);var c=m}}]);
//# sourceMappingURL=256.aafeb2d7.js.map