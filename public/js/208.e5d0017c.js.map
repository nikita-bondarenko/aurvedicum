{"version":3,"file":"js/208.e5d0017c.js","mappings":"gQAiBM,WAAEA,IAAeC,EAAAA,EAAAA,KAEjBC,GAAUC,EAAAA,EAAAA,IAAI,KACd,iBAAEC,EAAF,iBAAoBC,IAAqBC,EAAAA,EAAAA,KACzCC,GAAYJ,EAAAA,EAAAA,KAAI,GAChBK,GAAkBL,EAAAA,EAAAA,KAAI,GAC5BH,EAAW,CAAES,GAAIC,EAAMC,KAAKC,YACzBC,MAAMC,IACLZ,EAAQa,MAAQD,EAAIE,QAErBC,OAAM,IAAOT,EAAgBO,OAAQ,IACrCF,MAAK,IAAON,EAAUQ,OAAQ,IAEjC,MAAMG,GAASC,EAAAA,EAAAA,KAAS,IAClBjB,EAAQa,MAAMK,QACThB,EACLF,EAAQa,MAAMK,QAAQC,MAAMV,GAASA,EAAKF,KAAOC,EAAMC,KAAKW,WACzDJ,QAGE,K,6XChCX,MAAMK,EAAc,EAEpB,S,6qDC+HA,MAAM,kBAAEC,EAAF,uBAAqBC,EAArB,iBAA6CpB,IACjDC,EAAAA,EAAAA,MACI,SAAEoB,KAAazB,EAAAA,EAAAA,KACf0B,IAASC,EAAAA,EAAAA,MACTC,IAAQC,EAAAA,EAAAA,MACRC,GAAUC,aAAaC,QAAQ,WAChCF,KACHJ,GAAOO,KAAK,CAAEC,KAAM,YACpBC,EAAAA,EAAAA,sBAGF,MAAM7B,IAAYJ,EAAAA,EAAAA,KAAI,GAChBK,IAAkBL,EAAAA,EAAAA,KAAI,GACtBkC,IAAYlC,EAAAA,EAAAA,IAAI,IAChBmC,IAASnC,EAAAA,EAAAA,IAAI,CACjBoC,MAAO,EACPC,KAAM,EACNC,MAAO,IAETf,GAASK,IACNlB,MAAMC,IACLuB,GAAUtB,MAAQD,EAAIE,KACtBsB,GAAOvB,MAAM0B,MAAQC,KAAKC,KACxBN,GAAUtB,MAAM6B,OAAOC,MAAMC,OAASR,GAAOvB,MAAMwB,UAGtDtB,OAAM,IAAOT,GAAgBO,OAAQ,IACrCF,MAAK,IAAON,GAAUQ,OAAQ,IAEjC,MAAM8B,IAAQ1B,EAAAA,EAAAA,KAAS,IACdkB,GAAUtB,MAAM6B,OAAOC,MAAME,MAClCT,GAAOvB,MAAMwB,OAASD,GAAOvB,MAAMyB,KAAO,GAC1CF,GAAOvB,MAAMwB,MAAQD,GAAOvB,MAAMyB,Q,ozECjKtC,MAAMjB,GAAc,EAEpB","sources":["webpack://client/./src/components/order/OrderBasketItem.vue","webpack://client/./src/components/order/OrderBasketItem.vue?9c16","webpack://client/./src/views/OrderInfoPage.vue","webpack://client/./src/views/OrderInfoPage.vue?7ef3"],"sourcesContent":["<template>\r\n  <li\r\n    class=\"cart__order\"\r\n    :class=\"{ 'spinner-small': isLoading, 'loading-error': isLoadingFailed }\"\r\n  >\r\n    <h3>{{ product.name }}</h3>\r\n    <b>{{ editNumberFormat(item.price) }}&nbsp;₽</b>\r\n    <span>Объем/вес:&nbsp; {{ volume }}</span>\r\n    <span\r\n      >Колличество:&nbsp;{{ editNumberFormat(item.quantity) }}&nbsp;шт.</span\r\n    >\r\n  </li>\r\n</template>\r\n<script setup>\r\nimport { ref, defineProps, computed } from 'vue'\r\nimport useEditors from '@/hooks/useEditors'\r\nimport useApi from '@/hooks/useApi'\r\nconst { getProduct } = useApi()\r\nconst props = defineProps(['item'])\r\nconst product = ref({})\r\nconst { editVolumeFormat, editNumberFormat } = useEditors()\r\nconst isLoading = ref(true)\r\nconst isLoadingFailed = ref(false)\r\ngetProduct({ id: props.item.productId })\r\n  .then((res) => {\r\n    product.value = res.data\r\n  })\r\n  .catch(() => (isLoadingFailed.value = true))\r\n  .then(() => (isLoading.value = false))\r\n\r\nconst volume = computed(() => {\r\n  if (product.value.volumes) {\r\n    return editVolumeFormat(\r\n      product.value.volumes.find((item) => item.id === props.item.volumeId)\r\n        .volume\r\n    )\r\n  } else {\r\n    return ''\r\n  }\r\n})\r\n</script>\r\n<style lang=\"scss\">\r\n@import '@/styles/style.scss';\r\n.spinner-small::after {\r\n  @include basketItemSpinner;\r\n}\r\n</style>\r\n","import script from \"./OrderBasketItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrderBasketItem.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrderBasketItem.vue?vue&type=style&index=0&id=977938b2&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <main class=\"content container\">\r\n    <div class=\"content__top\">\r\n      <ul v-if=\"route.name === 'adminOrderInfo'\" class=\"breadcrumbs\">\r\n        <li class=\"breadcrumbs__item\">\r\n          <router-link :to=\"{ name: 'adminMenu' }\" class=\"breadcrumbs__link\">\r\n            Меню\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumbs__item\">\r\n          <router-link :to=\"{ name: 'adminOrders' }\" class=\"breadcrumbs__link\">\r\n            Заказы\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumbs__item\">\r\n          <span class=\"breadcrumbs__link\"> Информация о заказе </span>\r\n        </li>\r\n      </ul>\r\n\r\n      <ul v-else class=\"breadcrumbs\">\r\n        <li class=\"breadcrumbs__item\">\r\n          <router-link\r\n            @click=\"store.setCatalogPathName\"\r\n            :to=\"{ name: 'catalog' }\"\r\n            class=\"breadcrumbs__link\"\r\n          >\r\n            Каталог\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumbs__item\">\r\n          <router-link :to=\"{ name: 'basket' }\" class=\"breadcrumbs__link\">\r\n            Корзина\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumbs__item\">\r\n          <span class=\"breadcrumbs__link\"> Оформление заказа </span>\r\n        </li>\r\n      </ul>\r\n\r\n      <h1 v-if=\"route.name === 'adminOrderInfo'\" class=\"content__title\">\r\n        Заказ изменен\r\n      </h1>\r\n\r\n      <h1 v-else class=\"content__title\">Заказ оформлен</h1>\r\n    </div>\r\n\r\n    <section class=\"cart\">\r\n      <BaseSpinner v-if=\"isLoading\"></BaseSpinner>\r\n      <div v-else-if=\"!isLoading && isLoadingFailed\" class=\"loading-error\">\r\n        Не удалось получить информацию о заказе.\r\n      </div>\r\n      <form\r\n        v-else-if=\"!isLoading && !isLoadingFailed\"\r\n        class=\"cart__form form\"\r\n        action=\"#\"\r\n        method=\"POST\"\r\n      >\r\n        <div class=\"cart__field\">\r\n          <p v-if=\"!route.name === 'adminOrderInfo'\" class=\"cart__message\">\r\n            Благодарим за&nbsp;выбор нашего магазина. Наши менеджеры свяжутся\r\n            с&nbsp;Вами в&nbsp;течение одного рабочего дня для уточнения деталей\r\n            доставки.\r\n          </p>\r\n\r\n          <ul class=\"dictionary\">\r\n            <li class=\"dictionary__item\">\r\n              <span class=\"dictionary__key\"> Получатель </span>\r\n              <span class=\"dictionary__value\">\r\n                {{ orderData.name }}\r\n              </span>\r\n            </li>\r\n            <li class=\"dictionary__item\">\r\n              <span class=\"dictionary__key\"> Адрес доставки </span>\r\n              <span class=\"dictionary__value\">\r\n                {{ orderData.address }}\r\n              </span>\r\n            </li>\r\n            <li class=\"dictionary__item\">\r\n              <span class=\"dictionary__key\"> Телефон </span>\r\n              <span class=\"dictionary__value\">{{ orderData.phone }} </span>\r\n            </li>\r\n            <li class=\"dictionary__item\">\r\n              <span class=\"dictionary__key\"> Email </span>\r\n              <span class=\"dictionary__value\"> {{ orderData.email }} </span>\r\n            </li>\r\n            <li class=\"dictionary__item\">\r\n              <span class=\"dictionary__key\"> Способ доставки </span>\r\n              <span class=\"dictionary__value\">\r\n                {{ orderData.delivery.title }}\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"cart__block\" :class=\"{ indent: config.pages > 1 }\">\r\n          <PaginationBase\r\n            v-if=\"config.pages > 1\"\r\n            v-model:config=\"config\"\r\n            :pagination=\"config\"\r\n          ></PaginationBase>\r\n\r\n          <ul class=\"cart__orders\">\r\n            <OrderBasketItem\r\n              v-for=\"item in items\"\r\n              :key=\"item.id\"\r\n              :item=\"item\"\r\n            ></OrderBasketItem>\r\n          </ul>\r\n\r\n          <div class=\"cart__total\">\r\n            <p>\r\n              Доставка: <b>{{ deliveryPriceText(orderData.deliveryPrice) }} </b>\r\n            </p>\r\n            <p>\r\n              Итого:\r\n              {{ pluralizeProductAmount(orderData.basket.itemsQuantity) }} на\r\n              сумму\r\n              <b>{{ editNumberFormat(orderData.price) }}&nbsp;₽</b>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  </main>\r\n</template>\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { store } from '@/store/store'\r\nimport useApi from '@/hooks/useApi'\r\nimport BaseSpinner from '@/components/small/BaseSpinner.vue'\r\nimport PaginationBase from '@/components/small/PaginationBase.vue'\r\nimport OrderBasketItem from '@/components/order/OrderBasketItem.vue'\r\nimport useEditors from '@/hooks/useEditors'\r\nconst { deliveryPriceText, pluralizeProductAmount, editNumberFormat } =\r\n  useEditors()\r\nconst { getOrder } = useApi()\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst orderId = localStorage.getItem('orderId')\r\nif (!orderId) {\r\n  router.push({ name: 'catalog' })\r\n  store.setCatalogPathName()\r\n}\r\n\r\nconst isLoading = ref(true)\r\nconst isLoadingFailed = ref(false)\r\nconst orderData = ref({})\r\nconst config = ref({\r\n  limit: 5,\r\n  page: 1,\r\n  pages: 1\r\n})\r\ngetOrder(orderId)\r\n  .then((res) => {\r\n    orderData.value = res.data\r\n    config.value.pages = Math.ceil(\r\n      orderData.value.basket.items.length / config.value.limit\r\n    )\r\n  })\r\n  .catch(() => (isLoadingFailed.value = true))\r\n  .then(() => (isLoading.value = false))\r\n\r\nconst items = computed(() => {\r\n  return orderData.value.basket.items.slice(\r\n    config.value.limit * (config.value.page - 1),\r\n    config.value.limit * config.value.page\r\n  )\r\n})\r\n</script>\r\n<style lang=\"scss\">\r\n@import '@/styles/order.scss';\r\n.loading-error::after {\r\n  display: none;\r\n}\r\n@media (max-width: 910px) {\r\n  .cart__form {\r\n    grid-template-columns: 1fr;\r\n    grid-gap: 50px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./OrderInfoPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrderInfoPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrderInfoPage.vue?vue&type=style&index=0&id=43c654f0&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getProduct","useApi","product","ref","editVolumeFormat","editNumberFormat","useEditors","isLoading","isLoadingFailed","id","props","item","productId","then","res","value","data","catch","volume","computed","volumes","find","volumeId","__exports__","deliveryPriceText","pluralizeProductAmount","getOrder","router","useRouter","route","useRoute","orderId","localStorage","getItem","push","name","store","orderData","config","limit","page","pages","Math","ceil","basket","items","length","slice"],"sourceRoot":""}