"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[963],{2702:function(e,a,t){t.r(a),t.d(a,{default:function(){return f}});var r=t(3396),n=t(392),c=t(4870),o=t(4920),d=t(1120),s=t(4460);const i={class:"content__top"},l={class:"breadcrumbs"},m={class:"breadcrumbs__item"},u=(0,r.Uk)(" Меню "),p={class:"breadcrumbs__item"},_=(0,r.Uk)(" Товары "),h=(0,r._)("li",{class:"breadcrumbs__item"},[(0,r._)("span",{class:"breadcrumbs__link",disabled:""}," Добавление товара ")],-1);var b={__name:"AddItem",setup(e){const{fetch:a}=(0,o.Z)(),t=(0,c.iH)(JSON.parse(localStorage.getItem("createData"))||{volumes:[],categories:[],brands:[],images:[],description:[{header:"Полезные свойства",content:[],id:1},{header:"Преминение",content:[],id:2},{header:"Противопоказания",content:[],id:3},{header:"Состав",content:[],id:4}],recomend:{ids:[],brands:[],categories:[]}});s.h.updateProp("recomendIds",t.value.recomend.ids),(0,r.YP)((()=>s.h.recomendIds),(e=>{t.value.recomend.ids=e})),(0,r.YP)((()=>t.value),(e=>{s.h.updateProp("recomendBrands",e.recomend.brands),s.h.updateProp("recomendCategories",e.recomend.categories)}),{deep:!0,immediate:!0});const b=(0,c.iH)({}),g=()=>{const e=JSON.parse(localStorage.getItem("createData"));e.description=e.description.filter((e=>e.content.some((e=>!!e.paragraph)))),e.description&&e.description.forEach((e=>{e.content=e.content.filter((e=>!!e.paragraph))})),a("post","api/products",e,"SaveLoading").then((()=>{localStorage.removeItem("createData"),d.Z.push({name:"adminProducts"})})).catch((e=>{b.value=e.response.data,t.value.description.forEach((e=>{1!==e.content.length&&(e.content=e.content.filter((e=>!!e.paragraph)))}))}))};return(0,r.YP)((()=>t.value),(e=>{localStorage.setItem("createData",JSON.stringify(e))}),{deep:!0,immediate:!0}),(0,r.Jd)((()=>s.h.updateProp("recomendIds",[]))),(e,a)=>{const c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[(0,r._)("ul",l,[(0,r._)("li",m,[(0,r.Wm)(c,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,r.w5)((()=>[u])),_:1})]),(0,r._)("li",p,[(0,r.Wm)(c,{to:{name:"adminProducts"},class:"breadcrumbs__link"},{default:(0,r.w5)((()=>[_])),_:1})]),h])]),(0,r.Wm)(n.Z,{text:"добавить товар",data:t.value,"onUpdate:data":a[0]||(a[0]=e=>t.value=e),onSubmit:g,formError:b.value},null,8,["data","formError"])],64)}}};const g=b;var f=g}}]);
//# sourceMappingURL=963.6e0e45e3.js.map