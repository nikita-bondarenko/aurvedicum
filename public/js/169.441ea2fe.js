"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[169],{2392:function(e,t,l){l.d(t,{Z:function(){return B}});var a=l(3396),n=l(7139),i=l(4870),s=l(9242);function o(e,t,l,i,s,o){const u=(0,a.up)("DeleteButton");return e.open?((0,a.wg)(),(0,a.j4)(a.lR,{key:0,to:"#teleport-target"},[(0,a._)("div",{class:(0,n.C_)([{"out-content":e.isOutContent},"teleport-blackout"])},null,2),(0,a._)("div",{class:"teleport-modal",onClick:t[2]||(t[2]=(...t)=>e.onOutsideClick&&e.onOutsideClick(...t))},[(0,a._)("div",{ref:"contentElement",onMouseleave:t[0]||(t[0]=t=>e.isOutContent=!0),onMouseenter:t[1]||(t[1]=t=>e.isOutContent=!1),class:"teleport-modal__content"},[(0,a.WI)(e.$slots,"default"),(0,a.Wm)(u,{class:"teleport-modal__close",onClick:e.doClose},null,8,["onClick"])],544)])])):(0,a.kq)("",!0)}const u=(0,i.iH)(new Set);function c(){const{uid:e}=(0,a.FN)(),t=(0,i.iH)(!1),l=()=>{t.value=!0,u.value.add(e)},n=()=>{t.value=!1,u.value.delete(e)},s=(0,a.Fl)((()=>!!u.value.size)),o=()=>{s.value?s.value&&(document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px",document.body.style.overflow="hidden"):(document.body.style.overflow=null,document.body.style.paddingRight=null)};return(0,a.YP)(s,(()=>{o()})),{doOpen:l,doClose:n,isOpen:t,isSomeOpen:(0,a.Fl)((()=>u.value.size))}}const r={type:"button",class:"close"},d=(0,a.uE)('<svg width="20" height="20" fill="currentColor"><g id="color"></g><g id="hair"></g><g id="skin"></g><g id="skin-shadow"></g><g id="line"><line x1="0" x2="20" y1="0" y2="20" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line><line x1="20" x2="0" y1="0" y2="20" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line></g></svg>',1),_=[d];var m={__name:"DeleteButton",setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("button",r,_))}};const v=m;var p=v,g=(0,a.aZ)({props:{open:{type:Boolean}},emits:["update:open"],components:{DeleteButton:p},setup(e,{emit:t}){const l=(0,i.iH)(null),{doOpen:n,doClose:s}=c(),o=(0,i.iH)(!0),u=()=>{t("update:open",!1),s()},r=e=>{e.target!==l.value&&e.target.contains(l.value)&&u()};return(0,a.YP)((()=>e.open),(e=>{e?n():u()}),{immediate:!0}),{isOutContent:o,onOutsideClick:r,doClose:u,contentElement:l}}}),b=l(89);const w=(0,b.Z)(g,[["render",o]]);var k=w;const y={key:0,class:"error"},h={key:1,class:"good-message"};var C={__name:"BaseMessage",props:{open:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"error"}},emits:["update:open"],setup(e,{emit:t}){const l=e,s=(0,a.Fl)({get(){return l.open},set(e){return t("update:open",e),e}});return(t,l)=>((0,a.wg)(),(0,a.j4)(k,{open:(0,i.SU)(s),"onUpdate:open":l[0]||(l[0]=e=>(0,i.dq)(s)?s.value=e:null)},{default:(0,a.w5)((()=>["error"===e.type?((0,a.wg)(),(0,a.iD)("div",y,(0,n.zw)(e.text),1)):((0,a.wg)(),(0,a.iD)("div",h,(0,n.zw)(e.text),1))])),_:1},8,["open"]))}};const f=C;var x=f,D=l(6866);const U={class:"form__counter counter"},H={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 52.161 52.161",style:{"enable-background":"new 0 0 52.161 52.161"},"xml:space":"preserve"},S=(0,a._)("g",null,[(0,a._)("path",{class:"button__minus--icon",d:"M52.161,26.081c0,3.246-2.63,5.875-5.875,5.875H5.875C2.63,31.956,0,29.327,0,26.081l0,0c0-3.245,2.63-5.875,5.875-5.875 h40.411C49.531,20.206,52.161,22.835,52.161,26.081L52.161,26.081z"})],-1),q=[S],z={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"45.402px",height:"45.402px",viewBox:"0 0 45.402 45.402",style:{"enable-background":"new 0 0 45.402 45.402"},"xml:space":"preserve"},P=(0,a._)("g",null,[(0,a._)("path",{class:"button__plus--icon",d:"M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"})],-1),I=[P];var O={__name:"BaseCounter",props:["quantity","volume"],emits:["update:quantity"],setup(e,{emit:t}){const l=e,o=(0,i.iH)(!1),u=(0,i.iH)(!1),c=(0,D.yj)(),r=(0,a.Fl)({get(){return l.quantity},set(e){return e>l.volume.quantity&&!u.value&&"item"===c.name||l.volume.quantity<=0&&!u.value?(o.value=!0,void(u.value=!1)):(u.value=!1,void t("update:quantity",e))}}),d=()=>{r.value-1>0&&(u.value=!0,r.value-=1)};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("button",{onClick:d,type:"button",class:"counter__button button__minus","aria-label":"Убрать один товар"},[((0,a.wg)(),(0,a.iD)("svg",H,q))]),(0,a.wy)((0,a._)("input",{class:(0,n.C_)({"input--disabled":"basket"===(0,i.SU)(c).name}),type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.dq)(r)?r.value=e:null)},null,2),[[s.nr,(0,i.SU)(r)]]),(0,a._)("button",{type:"button","aria-label":"Добавить один товар",class:"counter__button button__plus",onClick:t[1]||(t[1]=e=>r.value+=1)},[((0,a.wg)(),(0,a.iD)("svg",z,I))]),(0,a.Wm)(x,{open:o.value,"onUpdate:open":t[2]||(t[2]=e=>o.value=e),text:"item"===(0,i.SU)(c).name?"Вы можете установить только значение, не превышающее количество товара в наличии.":"Не получилось изменить количество товара в корзине. Товар закончился."},null,8,["open","text"])]))}};const W=O;var B=W},6169:function(e,t,l){l.r(t),l.d(t,{default:function(){return be}});var a=l(3396),n=l(4870),i=l(7139),s=l(9242),o=l(86),u=l(6866),c=l(4460);const r={id:"catalog",class:"catalog"};function d(e,t,l,n,i,s){const o=(0,a.up)("BaseSpinner"),u=(0,a.up)("CatalogItems"),c=(0,a.up)("PaginationBase");return(0,a.wg)(),(0,a.iD)("div",(0,a.dG)(e.$attrs,{class:"content__catalog catalog-view"}),[(0,a._)("section",r,[e.isLoading?((0,a.wg)(),(0,a.j4)(o,{key:0})):((0,a.wg)(),(0,a.j4)(u,{key:1,items:e.localItems},null,8,["items"])),e.localPagination.pages>1?((0,a.wg)(),(0,a.j4)(c,{key:2,class:"catalog__pagination",config:e.localConfig,"onUpdate:config":t[0]||(t[0]=t=>e.localConfig=t),pagination:e.localPagination},null,8,["config","pagination"])):(0,a.kq)("",!0)])],16)}var _=l(6793),m=(0,a.aZ)(_.ps),v=l(89);const p=(0,v.Z)(m,[["render",d]]);var g=p,b=l(4920),w=l(8707),k=l(3088),y=l(2392),h=l(9829);const C={class:"content container"},f={class:"content__top"},x={key:0,class:"breadcrumbs"},D={class:"breadcrumbs__item"},U=(0,a.Uk)(" Меню "),H={class:"breadcrumbs__item"},S=(0,a.Uk)(" Заказы "),q={class:"breadcrumbs__item"},z=(0,a.Uk)(" Изменение заказа "),P={class:"breadcrumbs__item"},I=(0,a.Uk)(" Каталог "),O={class:"breadcrumbs__item"},W={class:"breadcrumbs__link",disabled:""},B={key:1,class:"breadcrumbs"},j={class:"breadcrumbs__item"},Y=(0,a.Uk)(" Каталог "),Z={class:"breadcrumbs__item"},M={class:"breadcrumbs__link",disabled:""},F={key:1,class:"failed-loading"},K={key:2,class:"item"},N={class:"item__pics pics"},T={key:0,class:"pics__list"},E=["onClick"],L=["src"],V={class:"item__info"},R={class:"item__title"},$={class:"item__form"},A=["onSubmit"],G={class:"item__row item__row--center"},J={class:"item__price-block"},Q={key:0,class:"item__subprice"},X={class:"item__row item__brand-volume"},ee={class:"item__brand"},te=(0,a._)("legend",{class:"form__legend"},"Бренд",-1),le={class:"brand-list"},ae={class:"brand-list__text"},ne={class:"item__volume"},ie=(0,a._)("legend",{class:"form__legend"},"Объем/вес",-1),se={key:1,class:"brand-list__item"},oe=(0,a._)("div",{class:"button__subtext"},"Товар добавлен",-1),ue={class:"item__desc"},ce=(0,a._)("h3",{class:"item__title"},"Описание",-1),re={class:"tabs"},de=["onClick"],_e={class:"item__content"},me={id:"recomend",class:"item__recomend"},ve=(0,a._)("h3",{class:"item__title"},"Рекомендуем также",-1);var pe={__name:"ItemPage",setup(e){const t=(0,u.tv)(),l=(0,u.yj)().params.id,{getProductData:r,addToBasket:d}=(0,b.Z)(),_=(0,n.iH)({description:[]}),m=(0,n.iH)(""),v=(0,n.iH)(""),p=(0,n.iH)({}),pe=(0,n.iH)(!0),ge=(0,n.iH)(!1),be=(0,n.iH)(!1),we=(0,n.iH)(!1),ke=(0,n.iH)(!0),ye=(0,n.iH)(1),he=(0,n.iH)(!1),Ce=(0,n.iH)(!1),fe=(0,n.iH)({}),{editNumberFormat:xe,pluralizeProductAmount:De}=(0,w.Z)();r(l).then((e=>{_.value=e,_.value.volumes[0]&&(he.value=1===_.value.volumes.length,v.value=_.value.volumes[0].id,p.value=_.value.volumes[0]),_.value.images[0]&&(fe.value=_.value.images[0]),_.value.description.length&&(m.value=_.value.description[0])})).catch((()=>{ge.value=!0,t.push({name:"notFound"})})).then((()=>pe.value=!1));const Ue=setInterval((()=>{r(l).then((e=>{_.value=e,p.value=_.value.volumes.find((e=>e.id===v.value))}))}),200);(0,a.Jd)((()=>clearInterval(Ue)));const He=e=>{m.value=_.value.description.find((t=>t.id===e))};let Se;(0,a.YP)((()=>p.value),(e=>{v.value=e.id,Ce.value=!!e.subprice,we.value=0===e.quantity,ke.value=e.quantity<ye.value}),{deep:!0}),(0,a.YP)((()=>ye.value),(e=>{ke.value=e<=0,clearTimeout(Se),e<=0&&(Se=setTimeout((()=>ye.value=1),2e3))}),{immediate:!0});const qe=e=>e.id===m.value.id,ze=async()=>{d({quantity:ye.value,productId:_.value.id,volumeId:p.value.id,isAdd:!0})};return(0,a.YP)((()=>c.h.basketCounterLoading),(e=>{e||(be.value=!0,setTimeout((()=>be.value=!1),1e3))})),(e,t)=>{const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",C,[(0,a._)("div",f,[(0,n.SU)(c.h).isOrderedBasket?((0,a.wg)(),(0,a.iD)("ul",x,[(0,a._)("li",D,[(0,a.Wm)(l,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,a.w5)((()=>[U])),_:1})]),(0,a._)("li",H,[(0,a.Wm)(l,{to:{name:"adminOrders"},class:"breadcrumbs__link"},{default:(0,a.w5)((()=>[S])),_:1})]),(0,a._)("li",q,[(0,a.Wm)(l,{to:(0,n.SU)(c.h).page,class:"breadcrumbs__link"},{default:(0,a.w5)((()=>[z])),_:1},8,["to"])]),(0,a._)("li",P,[(0,a.Wm)(l,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,a.w5)((()=>[I])),_:1})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.categories,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"breadcrumbs__item",key:e.id},[(0,a.Wm)(l,{to:{name:"catalog",params:{categoryId:e.categoryId}},onClick:(0,n.SU)(c.h).setCatalogPathName,class:"breadcrumbs__link",href:"#"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1032,["to","onClick"])])))),128)),(0,a._)("li",O,[(0,a._)("span",W,(0,i.zw)(_.value.name),1)])])):((0,a.wg)(),(0,a.iD)("ul",B,[(0,a._)("li",j,[(0,a.Wm)(l,{to:{name:"catalog"},onClick:(0,n.SU)(c.h).setCatalogPathName,class:"breadcrumbs__link"},{default:(0,a.w5)((()=>[Y])),_:1},8,["onClick"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.categories,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"breadcrumbs__item",key:e.id},[(0,a.Wm)(l,{to:{name:"catalog",params:{categoryId:e.categoryId}},onClick:(0,n.SU)(c.h).setCatalogPathName,class:"breadcrumbs__link",href:"#"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1032,["to","onClick"])])))),128)),(0,a._)("li",Z,[(0,a._)("span",M,(0,i.zw)(_.value.name),1)])]))]),pe.value&&!ge.value?((0,a.wg)(),(0,a.j4)(h.Z,{key:0})):ge.value?((0,a.wg)(),(0,a.iD)("div",F," Не удалось загрузить информацию о товаре, попробуйте перезагрузить страницу. ")):((0,a.wg)(),(0,a.iD)("section",K,[(0,a._)("div",N,[(0,a._)("div",{class:"pics__wrapper",style:(0,i.j5)({background:`no-repeat center/contain url('${(0,n.SU)(o.Ie)+fe.value.filename}') transparent`})},[_.value.images.length>1?((0,a.wg)(),(0,a.iD)("ul",T,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.images,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"pics__item",key:e.id},[(0,a._)("a",{href:"",onClick:(0,s.iM)((t=>fe.value=e),["prevent"]),class:(0,i.C_)(["pics__link",{"pics__link--current":e.id===fe.value.id}])},[(0,a._)("img",{alt:"Изображение товара",src:(0,n.SU)(o.Ie)+e.filename},null,8,L)],10,E)])))),128))])):(0,a.kq)("",!0)],4)]),(0,a._)("div",V,[(0,a._)("h2",R,(0,i.zw)(_.value.name),1),(0,a._)("div",$,[(0,a._)("form",{class:"form",action:"#",method:"POST",onSubmit:(0,s.iM)(ze,["prevent"])},[(0,a._)("div",{class:(0,i.C_)(["item__quantity",{"item__quantity--error":we.value}])},(0,i.zw)((0,n.SU)(De)(p.value.quantity))+" в наличии ",3),(0,a._)("div",G,[(0,a.Wm)(y.Z,{class:(0,i.C_)({disabled:0===p.value.quantity}),quantity:ye.value,"onUpdate:quantity":t[0]||(t[0]=e=>ye.value=e),volume:p.value},null,8,["class","quantity","volume"]),(0,a._)("div",J,[(0,a._)("b",{class:(0,i.C_)(["item__price",{"item__price--center":!Ce.value}])},(0,i.zw)((0,n.SU)(xe)(p.value.price))+" ₽ ",3),p.value.subprice?((0,a.wg)(),(0,a.iD)("span",Q,(0,i.zw)((0,n.SU)(xe)(p.value.subprice))+" ₽ ",1)):(0,a.kq)("",!0)])]),(0,a._)("div",X,[(0,a._)("div",ee,[te,(0,a._)("ul",le,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.brands,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"brand-list__item",key:e.id},[(0,a._)("span",ae,(0,i.zw)(e.title),1)])))),128))])]),(0,a._)("div",ne,[ie,he.value?((0,a.wg)(),(0,a.iD)("span",se,(0,i.zw)(p.value.volume),1)):((0,a.wg)(),(0,a.j4)(k.Z,{key:0,items:_.value.volumes,volume:p.value,"onUpdate:volume":t[1]||(t[1]=e=>p.value=e)},null,8,["items","volume"]))])]),(0,a._)("button",{class:(0,i.C_)(["button button--primery",{"button-error":ke.value,"spinner-small":(0,n.SU)(c.h).basketCounterLoading,"button--added":be.value}]),type:"submit"},[oe,(0,a.Uk)(" "+(0,i.zw)(ke.value?"Недопустимое количество товара":"В корзину"),1)],2)],40,A)])]),(0,a.wy)((0,a._)("div",ue,[ce,(0,a._)("ul",re,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.description,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"tabs__item",key:e.id},[(0,a._)("a",{onClick:(0,s.iM)((t=>He(e.id)),["prevent"]),class:(0,i.C_)(["tabs__link",{"tabs__link--current":qe(e)}])},(0,i.zw)(e.header),11,de)])))),128))]),(0,a._)("div",_e,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.value.content,(e=>((0,a.wg)(),(0,a.iD)("p",{key:e.id},(0,i.zw)(e.paragraph),1)))),128))])],512),[[s.F8,_.value.description.length>0]]),(0,a._)("div",me,[ve,(0,a.Wm)(g,{recomend:_.value.recomend},null,8,["recomend"])])]))])}}};const ge=pe;var be=ge}}]);
//# sourceMappingURL=169.441ea2fe.js.map