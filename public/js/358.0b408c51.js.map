{"version":3,"file":"js/358.0b408c51.js","mappings":"6gBAiCA,MAAM,MAAEA,IAAUC,EAAAA,EAAAA,KACZC,GAAOC,EAAAA,EAAAA,IACXC,KAAKC,MAAMC,aAAaC,QAAQ,gBAAkB,CAChDC,QAAS,GACTC,WAAY,GACZC,OAAQ,GACRC,OAAQ,GACRC,YAAa,CACX,CACEC,OAAQ,oBACRC,QAAS,GACTC,GAAI,GAEN,CAAEF,OAAQ,aAAcC,QAAS,GAAIC,GAAI,GACzC,CAAEF,OAAQ,mBAAoBC,QAAS,GAAIC,GAAI,GAC/C,CAAEF,OAAQ,SAAUC,QAAS,GAAIC,GAAI,MAIrCC,GAAQb,EAAAA,EAAAA,IAAI,IACZc,EAAS,KACb,MAAMC,EAAOd,KAAKC,MAAMC,aAAaC,QAAQ,eAC7CW,EAAKN,YAAcM,EAAKN,YAAYO,QAAQC,GAC1CA,EAAKN,QAAQO,MAAMC,KAAUA,EAAIC,cAE/BL,EAAKN,aACPM,EAAKN,YAAYY,SAASJ,IACxBA,EAAKN,QAAUM,EAAKN,QAAQK,QAAQC,KAAWA,EAAKG,eAGxDvB,EAAM,OAAQ,eAAgBkB,EAAM,iBACjCO,MAAK,KACJnB,aAAaoB,WAAW,cACxBC,EAAAA,EAAAA,KAAY,CAAEC,KAAM,qBAErBC,OAAOC,IACNd,EAAMe,MAAQD,EAAIE,SAAS9B,KAC3BA,EAAK6B,MAAMnB,YAAYY,SAASJ,IACF,IAAxBA,EAAKN,QAAQmB,SACjBb,EAAKN,QAAUM,EAAKN,QAAQK,QAAQC,KAAWA,EAAKG,oB,OAK5DW,EAAAA,EAAAA,KACE,IAAMhC,EAAK6B,QACVA,IACCzB,aAAa6B,QAAQ,aAAc/B,KAAKgC,UAAUL,MAEpD,CAAEM,MAAM,EAAMC,WAAW,I,0fC/E3B,MAAMC,EAAc,EAEpB","sources":["webpack://client/./src/components/admin/products/AddItem.vue","webpack://client/./src/components/admin/products/AddItem.vue?0d2a"],"sourcesContent":["<template>\r\n  <div class=\"content__top\">\r\n    <ul class=\"breadcrumbs\">\r\n      <li class=\"breadcrumbs__item\">\r\n        <router-link :to=\"{ name: 'adminMenu' }\" class=\"breadcrumbs__link\">\r\n          Меню\r\n        </router-link>\r\n      </li>\r\n      <li class=\"breadcrumbs__item\">\r\n        <router-link :to=\"{ name: 'adminProducts' }\" class=\"breadcrumbs__link\">\r\n          Товары\r\n        </router-link>\r\n      </li>\r\n\r\n      <li class=\"breadcrumbs__item\">\r\n        <span class=\"breadcrumbs__link\" disabled> Добавление товара </span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n  <ItemForm\r\n    :text=\"'добавить товар'\"\r\n    v-model:data=\"data\"\r\n    @submit=\"create\"\r\n    :formError=\"error\"\r\n  >\r\n  </ItemForm>\r\n</template>\r\n<script setup>\r\nimport ItemForm from '@/components/admin/products/ItemForm.vue'\r\nimport { ref, watch } from 'vue'\r\nimport useApi from '@/hooks/useApi'\r\nimport router from '@/router'\r\nconst { fetch } = useApi()\r\nconst data = ref(\r\n  JSON.parse(localStorage.getItem('createData')) || {\r\n    volumes: [],\r\n    categories: [],\r\n    brands: [],\r\n    images: [],\r\n    description: [\r\n      {\r\n        header: 'Полезные свойства',\r\n        content: [],\r\n        id: 1\r\n      },\r\n      { header: 'Преминение', content: [], id: 2 },\r\n      { header: 'Противопоказания', content: [], id: 3 },\r\n      { header: 'Состав', content: [], id: 4 }\r\n    ]\r\n  }\r\n)\r\nconst error = ref({})\r\nconst create = () => {\r\n  const body = JSON.parse(localStorage.getItem('createData'))\r\n  body.description = body.description.filter((item) =>\r\n    item.content.some((obj) => !!obj.paragraph)\r\n  )\r\n  if (body.description) {\r\n    body.description.forEach((item) => {\r\n      item.content = item.content.filter((item) => !!item.paragraph)\r\n    })\r\n  }\r\n  fetch('post', 'api/products', body, 'CreateLoading')\r\n    .then(() => {\r\n      localStorage.removeItem('createData')\r\n      router.push({ name: 'adminProducts' })\r\n    })\r\n    .catch((err) => {\r\n      error.value = err.response.data\r\n      data.value.description.forEach((item) => {\r\n        if (item.content.length === 1) return\r\n        item.content = item.content.filter((item) => !!item.paragraph)\r\n      })\r\n    })\r\n}\r\n\r\nwatch(\r\n  () => data.value,\r\n  (value) => {\r\n    localStorage.setItem('createData', JSON.stringify(value))\r\n  },\r\n  { deep: true, immediate: true }\r\n)\r\n</script>\r\n","import script from \"./AddItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AddItem.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["fetch","useApi","data","ref","JSON","parse","localStorage","getItem","volumes","categories","brands","images","description","header","content","id","error","create","body","filter","item","some","obj","paragraph","forEach","then","removeItem","router","name","catch","err","value","response","length","watch","setItem","stringify","deep","immediate","__exports__"],"sourceRoot":""}