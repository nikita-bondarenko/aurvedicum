"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[153],{4379:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var n=t(3396),r=t(4870),d=t(392),c=t(4920),s=t(1120),o=t(6866),i=t(4460),u=t(9829);const l={class:"content__top"},m={class:"breadcrumbs"},p={class:"breadcrumbs__item"},h=(0,n.Uk)(" Меню "),_={class:"breadcrumbs__item"},b=(0,n.Uk)(" Товары "),g=(0,n._)("li",{class:"breadcrumbs__item"},[(0,n._)("span",{class:"breadcrumbs__link",disabled:""}," Изменение товара ")],-1);var f={__name:"ChangeItem",setup(e){const{fetch:a}=(0,c.Z)(),t=(0,r.iH)({volumes:[],categories:[],brands:[],images:[],description:[{header:"Полезные свойства",content:[],id:1},{header:"Преминение",content:[],id:2},{header:"Противопоказания",content:[],id:3},{header:"Состав",content:[],id:4}],recomend:{ids:[],brands:[],categories:[]}}),f=(0,r.iH)({}),v=(0,o.yj)().params.id,k=()=>{const e=t.value;e.description=e.description.filter((e=>e.content.some((e=>!!e.paragraph)))),e.recomend.ids=i.h.recomendIds,e.description&&e.description.forEach((e=>{e.content=e.content.filter((e=>!!e.paragraph))})),a("patch",`api/products/${v}`,e,"SaveLoading").then((()=>{s.Z.push({name:"adminProducts"})})).catch((e=>{f.value=e.response.data,t.value.description.forEach((e=>{1!==e.content.length&&(e.content=e.content.filter((e=>!!e.paragraph)))}))}))};return a("get",`api/products/${v}`).then((e=>{t.value=e.data,i.h.updateProp("recomendIds",e.data.recomend.ids)})).catch((()=>s.Z.push({path:"adminNotFound"}))),(0,n.YP)((()=>t.value),(e=>{i.h.updateProp("recomendBrands",e.recomend.brands),i.h.updateProp("recomendCategories",e.recomend.categories)}),{deep:!0,immediate:!0}),(0,n.Jd)((()=>i.h.updateProp("recomendIds",[]))),(e,a)=>{const c=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",l,[(0,n._)("ul",m,[(0,n._)("li",p,[(0,n.Wm)(c,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[h])),_:1})]),(0,n._)("li",_,[(0,n.Wm)(c,{to:{name:"adminProducts"},class:"breadcrumbs__link"},{default:(0,n.w5)((()=>[b])),_:1})]),g])]),(0,r.SU)(i.h).isLoading?((0,n.wg)(),(0,n.j4)(u.Z,{key:0})):((0,n.wg)(),(0,n.j4)(d.Z,{key:1,text:"сохранить изменения",data:t.value,"onUpdate:data":a[0]||(a[0]=e=>t.value=e),onSubmit:k,formError:f.value},null,8,["data","formError"]))],64)}}};const v=f;var k=v}}]);
//# sourceMappingURL=153.7b9e049e.js.map