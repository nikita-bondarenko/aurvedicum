"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[867],{2867:function(a,e,t){t.r(e),t.d(e,{default:function(){return W}});var s=t(3396),i=t(7139),n=t(9242);const l={class:"content__top"},c={class:"breadcrumbs"},d={class:"breadcrumbs__item"},o=(0,s.Uk)(" Меню "),r=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("span",{class:"breadcrumbs__link",disabled:""}," Статьи ")],-1),_={class:"catalog content__catalog article"},u=(0,s.Uk)(" Добавить"),g={key:1,class:"data-base__empty-message"},m={class:"data-base__list"},p={class:"data-base__item-body"},b=["src"],k={class:"data-base__name"},h=(0,s.Uk)("Изменить"),f={class:"data-base__created"},w={class:"data-base__changed"},v=["onClick"],D=(0,s._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,s._)("path",{d:"M17 1L1 17m16 0L1 1",stroke:"#9D9D9D","stroke-width":".8"})],-1),y=[D];function C(a,e,t,D,C,Z){const A=(0,s.up)("router-link"),H=(0,s.up)("BaseSpinner"),I=(0,s.up)("PaginationBase");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",l,[(0,s._)("ul",c,[(0,s._)("li",d,[(0,s.Wm)(A,{to:{name:"adminMenu"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[o])),_:1})]),r])]),(0,s._)("section",_,[(0,s.Wm)(A,{to:{name:"adminAddArticle"},class:"data-base__button-add"},{default:(0,s.w5)((()=>[u])),_:1}),a.store.isLoading?((0,s.wg)(),(0,s.j4)(H,{key:0})):(0,s.kq)("",!0),0!==a.items.length||a.store.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",g," Список пуст ")),(0,s._)("ul",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,class:"data-base__item"},[(0,s._)("div",p,[(0,s._)("img",{class:"article__image",src:".."+a.IMAGE_STORE+e.filename,alt:"Иллюстрация статьи"},null,8,b),(0,s._)("h3",k,(0,i.zw)(e.header),1),(0,s.Wm)(A,{class:"data-base__change-button",to:{name:"adminChangeArticle",params:{id:e.id}}},{default:(0,s.w5)((()=>[h])),_:2},1032,["to"]),(0,s._)("span",f,"Созданно: "+(0,i.zw)(a.editors.editDate(e.created)),1),(0,s._)("span",w,"Измененно: "+(0,i.zw)(a.editors.editDate(e.changed)),1),(0,s._)("button",{class:"data-base__button-del button-del",type:"button","aria-label":"Удалить товар",onClick:(0,n.iM)((t=>a.deleteItem(e.id)),["prevent"])},y,8,v)])])))),128))]),a.pagination.pages>1?((0,s.wg)(),(0,s.j4)(I,{key:2,class:"catalog__pagination",config:a.config,"onUpdate:config":e[0]||(e[0]=e=>a.config=e),pagination:a.pagination},null,8,["config","pagination"])):(0,s.kq)("",!0)])],64)}var Z=t(2555),A=t(9829),H=t(4870),I=t(4920),M=t(4460),B=t(86),E=t(8707);const{fetchWithParams:L}=(0,I.Z)();var P=(0,s.aZ)({components:{BaseSpinner:A.Z,PaginationBase:Z.Z},data(){return{store:M.h,IMAGE_STORE:B.Ie}},setup(){const a=(0,E.Z)(),e=(0,H.iH)([]),t=(0,H.iH)({}),i=(0,H.iH)({limit:6,page:1}),n=()=>L("get","api/articles",i.value).then((a=>{e.value=a.data.items,t.value=a.data.pagination})),l=a=>{L("delete",`api/articles/${a}`,{},"").then((()=>n()))};return(0,s.YP)((()=>i.value),(()=>n()),{deep:!0,immediate:!0}),{editors:a,deleteItem:l,config:i,pagination:t,items:e}}}),S=t(89);const U=(0,S.Z)(P,[["render",C]]);var W=U}}]);
//# sourceMappingURL=867.d0840ce8.js.map